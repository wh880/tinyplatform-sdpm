#!set(activeTitle="项目管理",activeMenuId=currentPageId)
#import("/org/tinygroup/form/components/form.component")
#import("/org/tinygroup/icon/components/icon.component")
#import("/org/tinygroup/button/components/button_common.component")
#import("/org/tinygroup/button/components/button.component")
#macro radio1(rId rName rChecked rValue rClass rIsDisabled radioOther)
<input#if(rId) id="$!{rId}"#{end}#if(rName) name="$!{rName}"#end#if(rChecked && rChecked=="checked")
               checked#{end}#if(rValue) value="$!{rValue}"#end#if(rClass)
               class="$!{rClass}"#end#if(rIsDisabled && rIsDisabled=="disabled") disabled#end type="radio"
               onclick="${radioOther}"/>
#end
#macro labelRadio1(rId rName rValue rClass radioOther labelText)
    #@radioBox()
        #radio1(rId=rId rName=rName rValue=rValue rClass=rClass radioOthe=radioOther)
        #@label(ckId)${labelText}#end
    #end
#end
#set(name="document")
#@div()
    #@tabWithInit("tab_demo" "optionsBox")
        #@div(divClass="dropdownBox")
            #include("/project/dropdownMenu.page")
        #end
        #@tabHead()
            #include("/project/protab.page")
        #end
        #@tabBodyCol("ptop-5")

        #end
    #end
#end
<div class="infoContent">
    <p class="titleName">新建文档</p>
    #@div()
        #@tinyForm("thisform" TINY_CONTEXT_PATH+adminPath+"/project/doc/save" "" {"class":"test","enctype":
            "multipart/form-data"})
            <input type="hidden" name="docAddedBy" value="${UserUtils.getUserId()}"/>
            #@elementItem()
                #@sdpmItem("所属项目")
                    #@Tselect2F()
                        #@Tselect2Body(
                            "docProject" currentProjectId {"class":
                            "input-text select2"}) ##,"multiple":"multiple"加上为多选项
                            #foreach(project : projectList)
                                <option value="${project.projectId}">${project.projectName}</option>
                            #end
                        #end
                        #@Tselect2Fix()
                            <a href="${TINY_CONTEXT_PATH+adminPath}/project/form">增加</a>
                            <a href="${TINY_CONTEXT_PATH+adminPath}/project/list" class="r">全部</a>
                        #end
                    #end
                #end
            #end

            #@elementItem()
                #@sdpmItem("所属产品")
                    #@Tselect2F()
                        #@Tselect2Body(
                            "docProduct" "" {"class":"input-text select2"}) ##,"multiple":"multiple"加上为多选项
                            #foreach(product : productList)
                                <option value="${product.productId}">${product.productName}</option>
                            #end
                        #end
                    ##填写任意内容，侦听需重新填加 A侦听已内置
                        #@Tselect2Fix()
                            <a href="${TINY_CONTEXT_PATH+adminPath}/product/addproduct/addition">新增</a>
                            <a href="${TINY_CONTEXT_PATH+adminPath}/product/allproduct/addition" class="r">全部</a>
                        #end
                    #end
                #end
            #end

            #@elementItem()
                #@sdpmItem("所属分类")
                    #@Tselect2F()
                        #@Tselect2Body("docModule" doc?.docModule?:0 {"class":"input-text select2"})
                        #end
                    #end
                #end
            #end

            #@elementItem()
                #@sdpmItem("文档类型")
                ##                    #@skinMinimal("mt-20")
                ##                        #foreach(item : getDict("documentType"))
                ##                            #labelRadio1(rId="typefile" rName="type" rValue=item.value labelText=item.text
                ##                                "setType(this.value);")
                ##                        #end
                ##                    #end
                ##                    #@skinMinimal("mt-20")
                    #labelRadio1(rId="typefile" rName="docType" rChecked="checked" rValue="1"
                        "setType(this.value);" labelText=getDict("docType","1") )
                    #labelRadio1(rId="typeurl" rName="docType" rValue="2" labelText=getDict("docType",
                        "2") "setType(this.value);")
                    #labelRadio1(rId="typetext" rName="docType" rValue="3" labelText=getDict("docType",
                        "3") "setType(this.value);")
                ##                    #end
                #end
            #end

            #@elementItem()
                #@sdpmItem("文档标题")
                    #@formControlDiv("col-12")
                        #tinyInput(
                            "text" "docTitle" ""{"style":"width:300px","placeholder":"","datatype":"*4-16",
                            "nullmsg":"标题不能为空！","id":"doctitle","class":"input-text"})
                    #end
                #end
            #end

            #@elementItem(elementId="urlBox" eleItemClass="hidden")
                #@sdpmItem("文档URL")
                    #@formControlDiv("col-12")
                        #tinyInput(
                            "text" "docUrl" ""{"style":"width:300px","placeholder":"相应的链接地址","datatype":"*4-16",
                            "id":"docurl","class":"input-text"})
                    #end
                #end
            #end
            #@validateDiv("col-2")#end
            #@elementItem()
                #@sdpmItem("关键字")
                    #@formControlDiv("col-8")
                        #tinyInput(
                            "text" "docKeywords" ""{"style":"width:300px","placeholder":"","datatype":"*4-16",
                            "id":
                            "keywords","class":"input-text"})
                    #end
                #end
            #end
            #@validateDiv("col-2")#end

            #@elementItem()
                #@sdpmItem("文档摘要")
                    #@formControlDiv("col-8")
                        #@Teditor("content1" "docDigest" {"initialFrameHeight":"200","initialFrameWidth":"800"})#end
                    #end
                #end
            #end

            #@elementItem(elementId="fileBox" eleItemClass="")
                #@sdpmItem("附件")
                    #@formControlDiv("col-8")
                        #fileWithInput("file-1")
                    #end
                #end
            #end
            #@elementItem(elementId="contentBox" eleItemClass="hidden")
                #@sdpmItem("文档正文")
                    #@formControlDiv("col-8")
                        #@Teditor("content" "docContent" {"initialFrameHeight":"200","initialFrameWidth":"800"})#end
                    #end
                #end
            #end
            #@elementItem()
                <div class="text-c">
                    <input type="submit" class="radius btn-primary btn" value="保存">
                    <a href="javascript:history.go(-1)" class="radius btn-primary btn">返回</a>
                </div>
            #end
        #end
    #end
</div>


<script type="text/javascript">
    /* Set doc type. */
    function setType(type) {
        if (type == 'url') {
            $('#urlBox').removeClass('hidden');
            $('#fileBox').addClass('hidden');
            $('#contentBox').addClass('hidden');
        }
        else if (type == 'text') {
            $('#urlBox').addClass('hidden');
            $('#fileBox').addClass('hidden');
            $('#contentBox').removeClass('hidden');
        }
        else {
            $('#urlBox').addClass('hidden');
            $('#fileBox').removeClass('hidden');
            $('#contentBox').addClass('hidden');
        }
    }
</script>
