#import("/org/tinygroup/button/components/button_smart.component")
#!set(activeTitle="项目管理",activeMenuId=currentPageId)

###@delItemsdpm("/sdpm-web/project/task/index.pagelet" 5 "/sdpm-web/project/task/index.pagelet")delete#end

#set(name="task")
#@div()
    #@tabWithInit("tab_demo" "optionsBox")
        #@div(divClass="dropdownBox")
            #include("/project/dropdownMenu.page")
        #end
        #@tabHead()
            #include("/project/protab.page")
        #end
    ##head end
        #@tabBodyCol("ptop-5")
        ##operationbar start
            #include("/project/task/taskMenu.page")
        ##operationbay end
        #end
    ##body end
    #end
#end
<div class='container text-center bd-0'>
    <div class='clearfix'>
        <div class='actions r'>
            <div class='input-group l w-100px'>
                <select name='interval' id='interval' class='form-control'>
                    <option value='1'>间隔1天</option>
                    <option value='1'>间隔2天</option>
                    <option value='1' selected='selected'>间隔3天</option>
                    <option value='1'>间隔4天</option>
                    <option value='1'>间隔5天</option>
                    <option value='1'>间隔6天</option>
                    <option value='1'>间隔7天</option>
                    <option value='1'>间隔8天</option>
                </select>
            </div>
            <div class='input-group l w-100px'>
                <span class='input-infobtn'><a href='#' target='' class='btn'>显示周末</a></span>
                <span class='input-group-btn'><a href='#' target='hiddenwin' title='更新燃尽图' class='btn btn-primary'
                                                 id='computeBurn'>更新</a></span>
            </div>
        </div>
    </div>
    <div class='canvas-wrapper'>
        <div class='chart-canvas'>
            <canvas id='burnChart' width='800' height='400' data-bezier-curve='false' data-responsive='true'></canvas>
        </div>
    </div>
</div>
<script>
    function initBurnChar() {
        var data =
        {
            labels: [${days}],
            datasets: [
                {
                    label: "基准线",
                    color: "#CCC",
                    fillColor: "rgba(0,0,0,0)",
                    showTooltips: false,
                    data: [${average}]
                },
                {
                    label: "剩余",
                    color: "#0033CC",
                    data: [${left}]
                }]
        };

        var burnChart = $("#burnChart").lineChart(data, {animation: !($.zui.browser && $.zui.browser.ie === 8)});
    }
</script>
<script>

    /**
     * Compute the end date for project.
     *
     * @param  int    $delta
     * @access public
     * @return void
     */

    /* Auto compute the work days. */
    $(function () {
        initBurnChar();

        $('#burnTab').addClass('active');

        $('#interval').change(function () {
            location.href = createLink('project', 'burn', 'projectID=' + projectID + '&type=' + type + '&interval=' + $(this).val());
        });
    })

</script>