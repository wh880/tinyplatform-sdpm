#!set(activeTitle="项目管理",activeMenuId=currentPageId)
###import("/org/tinygroup/button/components/button_common.component")
###import("/org/tinygroup/button/components/button.component")
###import("/org/tinygroup/button/components/button_smart.component")
#set(name="task")
<style>
    .open #downMenuSty {
        min-width: 75px
    }
</style>
#@div()
    #@tabWithInit("tab_demo" "optionsBox")
        #@div(divClass="dropdownBox")
            #include("/project/dropdownMenu.page")
        #end
        #@tabHead()
            #include("/project/protab.page")
        #end
        #@tabBodyCol("ptop-5")
        ##operationbar start
            #@div(divClass="operationbar")
            批量增加
            #end
        ##operationbay end
        #end
    #end
#end
##operationbar end
#@tinyForm("bathAddForm" TINY_CONTEXT_PATH+adminPath+"/project/task/batchAdd" "post" {"class":"test"})
    #@tableBorder("out-border")
        #@thead()
            #@tr("text-c")
                #@thW("50px")ID#end
                #@thW("150px")所属模块#end
                #@thW("150px")相关需求#end
                #@thW("150px")任务名称#end
                #@thW("150px")类型#end
                #@thW("150px")指派给#end
                #@thW("150px")预算 #end
                #@thW("150px")任务描述#end
                #@thW("100px")优先级#end
            #end
        #end
        #@tbody()
            #foreach(i:[0..8])
                #@tr("text-c")
                    #@td()${i}#end
                    #@td()
                        #@Tselect2F()
                            #@Tselect2Body("taskList["+i+"].moduleId" "" {"class":
                                "input-text select2"}) ##,"multiple":"multiple"加上为多选项
                            <option value=""></option>
                                #foreach(m : modulesList)
                                <option value=${m.moduleId}>${m.moduleName}</option>
                                #end
                                #@Tselect2Fix()

                                #end
                            #end
                            #@validateDiv("col-2")#end
                        #end
                    #end
                    #@td()
                        #@Tselect2F()
                            #@Tselect2Body(
                                "taskList["+i+"].taskStory" "" {"class":
                                "input-text select2"})
                            <option value=""></option>
                                #foreach(s : storyList)
                                <option value=${s.storyId}>${s.storyTitle}</option>
                                #end
                            #end
                            #@Tselect2Fix()
                            <a href="${TINY_CONTEXT_PATH}/product/story/save">新增</a>
                            <a href="${TINY_CONTEXT_PATH}/product/story/search">全部</a>
                            #end
                        #end
                        #@validateDiv("col-2")#end
                    #end
                    #@td()
                        #tinyInput(
                            "text" "taskList["+i+"].taskName"""{"placeholder":"","datatype":"*4-16","nullmsg":
                            "任务名称不能为空！"})
                    #end
                    #@td()
                        #@formControlDiv( )
                            #@Tselect2F()
                                #@Tselect2Body(
                                    "taskList["+i+"].taskType" "" {"class":"input-text select2","datatype":"*4-16",
                                    "nullmsg":
                                    "不能为空"}) ##,"multiple":"multiple"加上为多选项
                                <option value=""></option>
                                <option value="1">设计</option>
                                <option value="2">开发</option>
                                <option value="3">测试</option>
                                <option value="4">研究</option>
                                <option value="5">讨论</option>
                                <option value="6">界面</option>
                                <option value="7">事物</option>
                                <option value="8">其他</option>
                                #end
                            #end
                        #end
                        #@validateDiv("col-2")#end
                    #end
                    #@td()
                        #@formControlDiv()
                            #@Tselect2F()
                                #@Tselect2Body(
                                    "taskList["+i+"].taskAssignedTo" "" {"class":
                                    "input-text select2"}) ##,"multiple":"multiple"加上为多选项
                                    #foreach(t : teamList)
                                    <option value=""></option>
                                    <option value="${t.teamAccount}">${t.teamAccount}</option>
                                    #end
                                #end
                                #@Tselect2Fix()
                                <a href="${TINY_CONTEXT_PATH}/org/user/form">增加</a>
                                <a href="${TINY_CONTEXT_PATH}/org/user/list" class="r">全部</a>
                                #end
                            #end
                        #end
                        #@validateDiv("col-2")#end
                    #end
                    #@td()
                        #tinyInput("text" "taskList["+i+"].taskEstimate" "")
                    #end
                    #@td()
                        #tinyInput("text" "taskList["+i+"].taskDesc" "")
                    #end
                    #@td()
                        #@Tselect2F()
                            #@Tselect2Body(
                                "taskList["+i+"].taskPri" "" {"class":"input-text select2","datatype":"*4-16","nullmsg":
                                "不能为空"}) ##,"multiple":"multiple"加上为多选项
                            <option value=""></option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            #end
                        #end
                        #@validateDiv("col-2")#end
                    #end
                #end

            #end
        <tr>
            <td class="text-c" colspan="20">
                <input type="submit" class="radius btn-primary btn" value="保存">
                <a href="javascript:history.go(-1)" class="radius btn-primary btn">返回</a>
            </td>
        </tr>
        #end

    #end
#end

<script type="text/javascript">
    $(function () {
        $('#${tableId}').on('click', '.delBtn', function (e) {
            user_del(this, '1');
        });
    })
</script>
#@dialog("myModal")
    #@dialogHeader()对话框标题#end
    #@dialogBody()<p>对话框内容…</p>#end
    #@dialogFooter()
        #@buttonEnsure()确定#end
        #@buttonCancel()关闭#end
    #end
#end
