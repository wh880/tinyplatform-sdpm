#import("/org/tinygroup/form/components/form.component")
#import("/org/tinygroup/bootstrapDate/components/bootstrapDate.component")
#import("/org/tinygroup/button/components/button_common.component")
#import("/org/tinygroup/button/components/button.component")
#import("/org/tinygroup/fold/components/fold.component")
##<style>
##    .pageleftpart label{display:inline-block;width:90px;text-align:right}
##</style>
#set(name="task")
#@div()
    #@tabWithInit("tab_demo" "optionsBox")
        #@div(divClass="dropdownBox")
            #include("/project/dropdownMenu.page")
        #end
        #@tabHead()
            #include("/project/protab.page")
        #end
    ##head end
    <br/>
    ##body end
    #end
#end
#@tinyForm("thisform" TINY_CONTEXT_PATH+"/project/task/save" "post" {"class":"test"})
    #hiddenInput(hiddenInputName="taskId" hiddenInputValue=task?.taskId)
    #hiddenInput(hiddenInputName="taskName" hiddenInputValue=task?.taskName)
    #hiddenInput(hiddenInputName="taskType" hiddenInputValue=task?.taskType)
    #hiddenInput(hiddenInputName="taskProject" hiddenInputValue=task?.taskProject)

<div style="width:70%;float:left" class="pageleftpart">
    <div class="infoContent">
        <p class="titleName">${task?.taskName}>编辑指派</p>

        #@elementItem()
            #@sdpmItem("客户联系人")
                #tinyInput("text" "orgUserAccount" "abcdefg"{"placeholder":"4~16个字符，字母/中文/数字/下划线","datatype":"*4-16","nullmsg":
                    "用户名不能为空！","id":"username","class":"input-text"})
            #end
        #end

        #@elementItem()
            #@sdpmItem("测试")
                #@Tselect2F()
                    #@Tselect2Body("lang" "IN" {"class":"input-text select2"}) ##,"multiple":"multiple"加上为多选项
                        <option value="CT">Connecticut</option>
                        <option value="DE">Delaware</option>
                        <option value="FL">Florida</option>
                        <option value="GA">Georgia</option>
                        <option value="IN">Indiana</option>
                        <option value="ME">Maine</option>
                        <option value="MD">Maryland</option>
                    #end
                ##填写任意内容，侦听需重新填加 A侦听已内置
                    #@Tselect2Fix()<a href="${TINY_CONTEXT_PATH}/testmanagement/page/proposeBug.page" class="r ">增加</a><a href="${TINY_CONTEXT_PATH}/testmanagement/page/Bug.page">全部</a>#end
                #end

            #end
        #end

        #@elementItem()
            #@sdpmItem("指派给")
                #@Tselect2F()
                    #@Tselect2Body("taskAssignedTo" "IN" {"class":"input-text select2"}) ##,"multiple":"multiple"加上为多选项
                        <option value="CT">Connecticut</option>
                        <option value="DE">Delaware</option>
                        <option value="FL">Florida</option>
                        <option value="GA">Georgia</option>
                        <option value="IN">Indiana</option>
                        <option value="ME">Maine</option>
                        <option value="MD">Maryland</option>
                    #end
                ##填写任意内容，侦听需重新填加 A侦听已内置
                    #@Tselect2Fix()<a href="${TINY_CONTEXT_PATH}/organization/user/add.page" class="r ">增加</a><a href="${TINY_CONTEXT_PATH}/organization/user/userRightTable.page">全部</a>#end
                #end
            #end
        #end

        #@elementItem()
            #@sdpmItem("预计剩余")
                <div class="input-group">
                    <input name=" taskLeft" type="text" class="form-control" placeholder="" aria-describedby="basic-addon2">
                    <span class="input-group-addon" id="basic-addon2">小时</span>
                </div>
            #end
        #end

        #@elementItem()
            <div class="col-12">
                <div class="col-2 text-r"><label>备注：</label></div>

                <div class="col-9">
                    #@Teditor("content" "content" {"initialFrameHeight":"150"})Say something#end</div>
            </div>
        #end
        <br/>
    </div>
    #@elementItem()
        <div class="col-12">
            <div class="col-5">

            </div>
            <div class="col-1">
                <button style="float: left" type="submit" id="submit" class="commitBtn">保存</button>
            </div>
            <div class="col-1">
                 #@aExtendButton("btn-sm backBtn" "javascript:history.go(-1)")取消#end
            </div>
            <div class="col-5"></div>
        </div>
    #end
    <br>
</div>
#end
<div style="width:30%;position: fixed;top: 153px;right: 10px;" class="rightpart">
    #@div(divClass="infoContent")
        <p class="titleName">历史记录</p>
        #include("/project/recordlist.page")
    #end
</div>
<script type="text/javascript">

    $(function(){
        var minTop=96;
        var maxTop=153;
        var currenttop=maxTop;
        function doscroll(){
            currenttop=maxTop-parseInt($(window).scrollTop());
            if(currenttop<minTop) currenttop=minTop;
            $(".rightpart").css("top",currenttop+"px");
        }
        var timer_scroll;
        $(window).scroll(function(){
            clearTimeout(timer_scroll);
            setTimeout(function() {
                doscroll();
            },10);
        })
    })
</script>