#!set(activeTitle="团队管理",activeMenuId=currentPageId)

#set(name="team")
#@div()
    #@tabWithInit("tab_demo" "optionsBox")
        #@div(divClass="dropdownBox")
            #include("/project/dropdownMenu.page")
        #end
        #@tabHead()
            #include("/project/protab.page")
        #end
        #@tabBodyCol("ptop-5")
            #@div(divClass="operationbar")
            团队管理
            #end
        #end
    #end
#end
#@tinyForm("thisform" TINY_CONTEXT_PATH+adminPath+"/project/team/teamManageSave" "post" {"class":"test"})
    #@table()
    <tr>
        <td width="20%">
            用户
        </td>
        <td width="20%">
            角色
        </td>
        <td width="20%">
            加盟日
        </td>
        <td width="20%">
            可用工日
        </td>
        <td width="20%">
            可用工时/天
        </td>
    </tr>
        #set(a = 0)
        #foreach(t : teamList)
        <tr>
            #@thW("250px")
                ${t?.teamUserId==null?"":UserUtils.getUserById(t?.teamUserId)?.orgUserRealName}
                <input name="teamList[${a}].teamUserId" value="${t?.teamUserId}" type="hidden">
                <input name="teamList[${a}].id" value="${t.id}" type="hidden">
            #end
            <td>
                #tinyInput("text" "teamList["+a+"].teamRole" t.teamRole {"datatype":"","class":"input-text"})
            </td>
            <td>
                #@tinyDateInput("teamList["+a+"].teamJoin" formatDate(now(),"yyyy-MM-dd") "YYYY-MM-DD" )#end
            </td>
            <td>
                #tinyInput("text" "teamList["+a+"].teamDays" t.teamDays {"datatype":"","class":"input-text"})
            </td>
            <td>
                #tinyInput("text" "teamList["+a+"].teamHours" t.teamHours {"datatype":"","class":"input-text"})
            </td>
        </tr>
            #set(a = a + 1)
        #end
        #foreach(i : userList)
        <tr>
            <td>
                #@Tselect2F()
                    #@Tselect2Body("teamList["+a+"].teamUserId" "" {"class":"input-text select2"})
                        <option value="">/</option>
                        #foreach(u : userList)
                            <option value="${u.orgUserId}">${u.orgUserRealName}</option>
                        #end
                    #end
                    #@Tselect2Fix()
                        <a href="${TINY_CONTEXT_PATH+adminPath}/org/user/form">增加</a>
                        <a href="${TINY_CONTEXT_PATH+adminPath}/org/user/list" class="r">全部</a>
                    #end
                #end
            </td>
            <td>
                #tinyInput("text" "teamList["+a+"].teamRole" "" {"datatype":"","class":"input-text"})
            </td>
            <td>
                #@tinyDateInput("teamList["+a+"].teamJoin" formatDate(now(),"yyyy-MM-dd") "YYYY-MM-DD" )#end
            </td>
            <td>
                #tinyInput("text" "teamList["+a+"].teamDays" "" {"datatype":"","class":"input-text"})
            </td>
            <td>
                #tinyInput("text" "teamList["+a+"].teamHours" "" {"datatype":"","class":"input-text"})
            </td>
        </tr>
            #set(a = a + 1)
        #end
    #end
    #@div(divClass="col-10 col-offset-2 form-inline")
        #tinyInput("submit" "submitbtn" " 保存 " {"class":"btn btn-primary"})
    #end

#end
