#!set(activeTitle="项目管理",activeMenuId=currentPageId)
#import("/org/tinygroup/form/components/form.component")
#import("/org/tinygroup/icon/components/icon.component")
#import("/org/tinygroup/button/components/button_common.component")
#import("/org/tinygroup/button/components/button.component")

#macro radio1(rId rName rChecked rValue rClass rIsDisabled radioOther)
<input#if(rId) id="$!{rId}"#{end}#if(rName) name="$!{rName}"#end#if(rChecked && rChecked=="checked")
               checked#{end}#if(rValue) value="$!{rValue}"#end#if(rClass)
               class="$!{rClass}"#end#if(rIsDisabled && rIsDisabled=="disabled") disabled#end type="radio"
               onclick="${radioOther}"/>
#end
#macro labelRadio1(rId rName rValue rClass radioOther labelText)
    #@radioBox()
        #radio1(rId=rId rName=rName rValue=rValue rClass=rClass radioOthe=radioOther)
        #@label(ckId)${labelText}#end
    #end
#end
<style>
    #*.tabLayout .tabBar span a{color:#333}
    .tabLayout .tabBar .Current a{color:#fff}
    .operationbar{border-top:none;background:#f9fafe;padding:6px 5px 6px 10px;}
    .b {margin-left: 8px;}*#

    .hidden_namesty {
        margin-left: 17%
    }

    .label_title {
        width: 100px
    }
</style>

#set(name="survey")
#@div()
    #@tabWithInit("tab_demo" "optionsBox")
        #@div(divClass="dropdownBox")
            #include("/project/dropdownMenu.page")
        #end
        #@tabHead()
            #include("/project/protab.page")
        #end
        #@tabBodyCol("ptop-5")
        ##编辑页面
            #@div(divClass="operationbar")
            <a href="#">项目名称</a>>编辑项目
            #end
            #@tinyForm("thisform" TINY_CONTEXT_PATH+"/project/editsave" "" {"class":"test"})
                #hiddenInput(hiddenInputName="projectId" hiddenInputValue=project?.projectId)
                #@elementItem()
                    #@colLabel()项目名称#end
                    #@formControlDiv("col-8")
                        #tinyInput(
                            "text" "projectName" project?.projectName{"style":"width:300px","placeholder":"请输入项目名称","datatype":"*4-16",
                            "nullmsg":"项目名称不能为空！","id":"","class":"input-text"})
                    #end
                    #@validateDiv("col-2")#end
                #end
                #@elementItem()
                    #@colLabel()项目代号#end
                    #@formControlDiv("col-8")
                        #tinyInput(
                            "text" "projectCode" project?.projectCode{"style":"width:300px","placeholder":"请输入项目代号","datatype":"*4-16",
                            "nullmsg":"项目代号不能为空！","id":"","class":"input-text"})
                    #end
                    #@validateDiv("col-2")#end
                #end
                #@elementItem()
                    #@colLabel()起始日期#end
                    #@formControlDiv("col-8")
                        #@tinyDateInput(
                            "projectBegin" project?.projectBegin "YYYY-MM-DD" {"style":"width:260px","datatype":"*","nullmsg":"日期不能为空",
                            "placeholder":"选择日期"})#end
                    #end
                    #@validateDiv("col-2")#end
                #end
                #@elementItem()
                    #@colLabel()结束日期#end
                    #@formControlDiv("col-8")
                        #@tinyDateInput(
                            "projectEnd" project?.projectEnd "YYYY-MM-DD" {"style":"width:260px","datatype":"*","nullmsg":"日期不能为空",
                            "placeholder":"选择日期"})#end
                    #end
                    #@validateDiv("col-2")#end
                #end
                #@elementItem()
                    #@sdpmItem("可用工作日")
                    <div class="input-group">
                        <input name="projectDays" type="text" class="form-control" placeholder="" value= ${project?.projectDays}
                               aria-describedby="basic-addon2">
                        <span class="input-group-addon" id="basic-addon2">小时</span>
                    </div>
                    #end
                #end
                #@elementItem()
                    #@sdpmItem("项目类型")
                        #@Tselect2F()
                            #@Tselect2Body(
                                "projectType" project?.projectType {"class":"input-text select2"}) ##,"multiple":"multiple"加上为多选项
                            <option value="0">长期项目</option>
                            <option value="1">短期项目</option>
                            <option value="2">运维项目</option>
                            #end
                        ##填写任意内容，侦听需重新填加 A侦听已内置
                        ##@Tselect2Fix()<a href="http://www.baidu.com" class="r ">增加</a><a href="#">全部</a>#end
                        #end
                    #end
                #end
                #@elementItem()
                    #@sdpmItem("团队名称")
                        #tinyInput(
                            "text" "projectTeam" project?.projectTeam{"style":"width:300px","placeholder":"","datatype":"*4-16","nullmsg":
                            "标题不能为空！","id":"username","class":"input-text"})
                    #end
                #end
                #@elementItem()
                    #@colLabel()项目状态#end
                    #@formControlDiv("col-8")
                        #@Tselect2F()
                            #@Tselect2Body("projectStatus" project?.projectStatus; {"class":"input-text select2"}) ##,"multiple":"multiple"加上为多选项
                            <option value="0">未开始</option>
                            <option value="1">进行中</option>
                            <option value="2">已挂起</option>
                            <option value="3">已完成</option>
                            #end
                        ##填写任意内容，侦听需重新填加 A侦听已内置

                        #end
                    #end
                    #@validateDiv("col-2")#end
                #end
                #@elementItem()
                    #@colLabel()产品负责人#end
                    #@formControlDiv("col-8")
                        #@Tselect2F()
                            #@Tselect2Body("projectPO" project?.projectPO {"class":"input-text select2"}) ##,"multiple":"multiple"加上为多选项
                            <option value="CT">Connecticut</option>
                            <option value="DE">Delaware</option>
                            <option value="FL">Florida</option>
                            <option value="GA">Georgia</option>
                            <option value="IN">Indiana</option>
                            <option value="ME">Maine</option>
                            <option value="MD">Maryland</option>
                            #end
                        ##填写任意内容，侦听需重新填加 A侦听已内置
                            #@Tselect2Fix()<a href="${TINY_CONTEXT_PATH}/org/user/form"
                                              class="r ">增加</a><a
                                    href="${TINY_CONTEXT_PATH}/org/user/list">全部</a>#end
                        #end
                    #end
                    #@validateDiv("col-2")#end
                #end
                #@elementItem()
                    #@colLabel()项目负责人#end
                    #@formControlDiv("col-8")
                        #@Tselect2F()
                            #@Tselect2Body("projectPM" project?.projectPM {"class":"input-text select2"}) ##,"multiple":"multiple"加上为多选项
                            <option value="CT">Connecticut</option>
                            <option value="DE">Delaware</option>
                            <option value="FL">Florida</option>
                            <option value="GA">Georgia</option>
                            <option value="IN">Indiana</option>
                            <option value="ME">Maine</option>
                            <option value="MD">Maryland</option>
                            #end
                        ##填写任意内容，侦听需重新填加 A侦听已内置
                            #@Tselect2Fix()<a href="${TINY_CONTEXT_PATH}/org/user/form"
                                              class="r ">增加</a><a
                                    href="${TINY_CONTEXT_PATH}/org/user/list">全部</a>#end
                        #end
                    #end
                    #@validateDiv("col-2")#end
                #end
                #@elementItem()
                    #@colLabel()测试负责人#end
                    #@formControlDiv("col-8")
                        #@Tselect2F()
                            #@Tselect2Body("projectQD" project?.projectQD {"class":"input-text select2"}) ##,"multiple":"multiple"加上为多选项
                            <option value="CT">Connecticut</option>
                            <option value="DE">Delaware</option>
                            <option value="FL">Florida</option>
                            <option value="GA">Georgia</option>
                            <option value="IN">Indiana</option>
                            <option value="ME">Maine</option>
                            <option value="MD">Maryland</option>
                            #end
                        ##填写任意内容，侦听需重新填加 A侦听已内置
                            #@Tselect2Fix()<a href="${TINY_CONTEXT_PATH}/org/user/form"
                                              class="r ">增加</a><a
                                    href="${TINY_CONTEXT_PATH}/org/user/list">全部</a>#end
                        #end
                    #end
                    #@validateDiv("col-2")#end
                #end
                #@elementItem()
                    #@colLabel()发布负责人#end
                    #@formControlDiv("col-8")
                        #@Tselect2F()
                            #@Tselect2Body("proectRD;" project?.projectRD {"class":"input-text select2"}) ##,"multiple":"multiple"加上为多选项
                            <option value="CT">Connecticut</option>
                            <option value="DE">Delaware</option>
                            <option value="FL">Florida</option>
                            <option value="GA">Georgia</option>
                            <option value="IN">Indiana</option>
                            <option value="ME">Maine</option>
                            <option value="MD">Maryland</option>
                            #end
                        ##填写任意内容，侦听需重新填加 A侦听已内置
                            #@Tselect2Fix()<a href="${TINY_CONTEXT_PATH}/org/user/form"
                                              class="r ">增加</a><a
                                    href="${TINY_CONTEXT_PATH}/org/user/list">全部</a>#end
                        #end
                    #end
                    #@validateDiv("col-2")#end
                #end
                #@elementItem()
                    #@sdpmItem("关联产品")
                    ###tinyInput("text" "username" ""{"style":"width:300px","placeholder":"","datatype":"*4-16","nullmsg":"标题不能为空！","id":"username","class":"input-text"})
                        #@tinySelect("linkProduct" project?.linkProduct {"class":"input-text select2","rel":"22","multiple":"multiple"})
                            #for(p : prodcutList)
                            #@tinyOptionItem(p.productId)${p.productName}#end
                        #end
                    #end
                #end
            <br/>
                #@elementItem()
                    #@sdpmItem("项目描述")
                        #@Teditor("projectDesc" "content" {"initialFrameHeight":"200"})${project?.projectDesc}#end
                    #end
                #end
                #@elementItem()
                    #@colLabel()访问控制：#end
                    #@skinMinimal("col-8")
                        #labelRadio1(rId="aclopen" rName="projectAcl" rValue="open" labelText="默认设置(有项目视图权限，即可访问)"
                            "setWhite(this.value);")</br>
                        #labelRadio1(rId="aclcustom" rName="projectAcl" rValue="custom1" labelText="私有项目(只有项目团队成员才能访问)"
                            "setWhite(this.value);")</br>
                        #labelRadio1(rId="aclcustom" rName="projectAcl" rValue="custom" labelText="自定义白名单(团队成员和白名单的成员可以访问)"
                            "setWhite(this.value);")</br>

                    #end
                    #@validateDiv("col-2")#end
                #end
                #@elementItem(elementId="whitelistBox" eleItemClass="hidden hidden_namesty")
                    #@colLabel()分组白名单#end
                    #@skinMinimal("col-8")
                        #labelCheckbox(ckId="whitelistBox" labelText="管理员")
                        #labelCheckbox(ckId="whitelistBox" labelText="研发")
                        #labelCheckbox(ckId="whitelistBox" labelText="测试")
                        #labelCheckbox(ckId="whitelistBox" labelText="项目经理")
                        #labelCheckbox(ckId="whitelistBox" labelText="产品经理")
                        #labelCheckbox(ckId="whitelistBox" labelText="研发主管")
                        #labelCheckbox(ckId="whitelistBox" labelText="产品主管")
                        #labelCheckbox(ckId="whitelistBox" labelText="测试主管")
                    #end
                    #@validateDiv("col-2")#end
                #end
                #@colLabel()#end
            <button style="float: left" type="submit" id="submit" class="commitBtn" >保存</button>
            <a href="${TINY_CONTEXT_PATH}/project/survey/index.page">#buttonDefault(caption="返回")</a>
            #end

        #end
    #end
#end
#end

<script type="text/javascript">
    function setWhite(acl) {
        acl == 'custom' ? $('#whitelistBox').removeClass('hidden') : $('#whitelistBox').addClass('hidden');
    }
</script>
