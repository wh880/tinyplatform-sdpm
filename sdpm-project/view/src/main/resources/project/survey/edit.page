#!set(activeTitle="项目管理",activeMenuId=currentPageId)
#import("/org/tinygroup/form/components/form.component")
#import("/org/tinygroup/icon/components/icon.component")
#import("/org/tinygroup/button/components/button_common.component")
#import("/org/tinygroup/button/components/button.component")

#macro radio1(rId rName rChecked rValue rClass rIsDisabled radioOther)
<input#if(rId) id="$!{rId}"#{end}#if(rName) name="$!{rName}"#end#if(rChecked && rChecked=="checked")
               checked#{end}#if(rValue) value="$!{rValue}"#end#if(rClass)
               class="$!{rClass}"#end#if(rIsDisabled && rIsDisabled=="disabled") disabled#end type="radio"
               onclick="${radioOther}"/>
#end
#macro labelRadio1(rId rName rValue rClass radioOther labelText)
    #@radioBox()
        #radio1(rId=rId rName=rName rValue=rValue rClass=rClass radioOthe=radioOther)
        #@label(ckId)${labelText}#end
    #end
#end
<style>
    .hidden_namesty {
        margin-left: 17%
    }

    .label_title {
        width: 100px
    }
</style>

#set(name="survey")
#@div()
    #@tabWithInit("tab_demo" "optionsBox")
        #@div(divClass="dropdownBox")
            #include("/project/dropdownMenu.page")
        #end
        #@tabHead()
            #include("/project/protab.page")
        #end
        #@tabBodyCol("ptop-5")
        ##编辑页面
            #@div(divClass="operationbar")
            <a href="#">项目名称</a>>编辑项目
            #end
        #end
    #end
#end

#@tinyForm("thisform" TINY_CONTEXT_PATH+adminPath+"/project/edit" "post" {"class":"test"})
    #hiddenInput(hiddenInputName="projectId" hiddenInputValue=project?.projectId)
    #@elementItem()
        #@sdpmItem("项目名称" "*")
            #tinyInput(
                "text" "projectName" project?.projectName {"placeholder":"请输入项目名称","datatype":"*","nullmsg":"项目名称不能为空！",
                "class":"input-text"})
            #@validateDiv("col-2")#end
        #end
    #end
    #@elementItem()
        #@sdpmItem("项目代号" "*")
            #tinyInput(
                "text" "projectCode" project?.projectCode {"placeholder":"请输入项目代号","datatype":"*","nullmsg":"项目代号不能为空！",
                "class":"input-text"})
            #@validateDiv("col-2")#end
        #end
    #end
    #@elementItem()
        #@sdpmItem("起始日期" "*")
            #@tinyDateInput(
                "projectBegin" formatDate(project?.projectBegin,
                "yyyy-MM-dd") "yyyy-MM-dd" {"style":"width:275px","datatype":"*","nullmsg":"结束日期不能为空",
            "placeholder":
            "选择日期"})#end
        #end
    #end
    #@elementItem()
        #@sdpmItem("结束日期" "*")
            #@tinyDateInput(
                "projectEnd" formatDate(project?.projectEnd,
                "yyyy-MM-dd") "yyyy-MM-dd" {"style":"width:275px","datatype":"*","nullmsg":"结束日期不能为空",
            "placeholder":
            "选择日期"})#end
        #end
    #end
    #@elementItem()
        #@sdpmItem("可用工作日")
        <div class="input-group">
            <input name="projectDays" type="text" class="form-control" placeholder="" value=${project?.projectDays} aria-describedby="basic-addon2">
            <span class="input-group-addon" id="basic-addon2">小时</span>
        </div>
        #end
    #end
    #@elementItem()
        #@sdpmItem("项目类型")
            #@Tselect2F()
                #@Tselect2Body("projectType" project?.projectType {"class":"input-text select2"}) ##,"multiple":"multiple"加上为多选项
                    #foreach(type:getDict("projectStatus"))
                    <option value="${type?.value}">${type?.text}</option>
                    #end
                #end
            #end
        #end
    #end
    #@elementItem()
        #@sdpmItem("团队名称" "*")
            #tinyInput("text" "projectTeam" project?.projectTeam {"placeholder":"请输入团队名称","datatype":"*","nullmsg":
                "团队名称不能为空","class":"input-text"})
        #end
    #end
    #@elementItem()
        #@sdpmItem("关联产品")
            #@Tselect2F()
                #@Tselect2Body("linkProduct" "" {"class":"input-text select2","multiple":"multiple"})
                    #foreach(p : prodcutList)
                    <option value="${p?.productId}">${p.productName}</option>
                    #end
                #end
                #@Tselect2Fix()
                <a href="${TINY_CONTEXT_PATH+adminPath}/product/addproduct/addition">增加</a>
                <a href="${TINY_CONTEXT_PATH+adminPath}/product/allproduct/addition" class="r">全部</a>
                #end
            #end
        #end
    #end
    #@elementItem()
        #@sdpmItem("项目状态")
            #@Tselect2F()
                #@Tselect2Body(
                    "projectType" project?.projectStatus {"class":"input-text select2","minimumResultsForSearch":
                    "Infinity"}) ##,"multiple":"multiple"加上为多选项
                <option value="">/</option>
                    #foreach(type : getDict("projectType"))
                    <option value=${type.value}>${type.text}</option>
                    #end
                #end
            #end
        #end
    #end
    #@elementItem()
        #@sdpmItem("产品负责人")
            #@Tselect2F()
                #@Tselect2Body("projectPo" project?.projectPO {"class":"input-text select2"})
                    #foreach(t : team)
                    <option value="${t?.teamUserId}">
                        ${t?.teamUserId==null?"":UserUtils.getUserById(t?.teamUserId)?.orgUserRealName}
                    </option>
                    #end
                #end
                #@Tselect2Fix()
                <a href="${TINY_CONTEXT_PATH+adminPath}/org/user/form">增加</a>
                <a href="${TINY_CONTEXT_PATH+adminPath}/org/user/list" class="r">全部</a>
                #end
            #end
        #end
    #end
    #@elementItem()
        #@sdpmItem("项目负责人")
            #@Tselect2F()
                #@Tselect2Body("projectPm" project?.projectPm {"class":"input-text select2"})
                    #foreach(t : team)
                    <option value="${t?.teamUserId}">
                        ${t?.teamUserId==null?"":UserUtils.getUserById(t?.teamUserId)?.orgUserRealName}
                    </option>
                    #end
                #end
                #@Tselect2Fix()
                <a href="${TINY_CONTEXT_PATH+adminPath}/org/user/form">增加</a>
                <a href="${TINY_CONTEXT_PATH+adminPath}/org/user/list" class="r">全部</a>
                #end
            #end
        #end
    #end
    #@elementItem()
        #@sdpmItem("测试负责人")
            #@Tselect2F()
                #@Tselect2Body("projectQd" project?.projectQd {"class":"input-text select2"})
                    #foreach(t : team)
                    <option value="${t?.teamUserId}">
                        ${t?.teamUserId==null?"":UserUtils.getUserById(t?.teamUserId)?.orgUserRealName}
                    </option>
                    #end
                #end
                #@Tselect2Fix()
                <a href="${TINY_CONTEXT_PATH+adminPath}/org/user/form">增加</a>
                <a href="${TINY_CONTEXT_PATH+adminPath}/org/user/list" class="r">全部</a>
                #end
            #end
        #end
    #end
    #@elementItem()
        #@sdpmItem("发布负责人")
            #@Tselect2F()
                #@Tselect2Body("projectRd" project?.projectRd {"class":"input-text select2"})
                    #foreach(t : team)
                    <option value="${t?.teamUserId}">
                        ${t?.teamUserId==null?"":UserUtils.getUserById(t?.teamUserId)?.orgUserRealName}
                    </option>
                    #end
                #end
                #@Tselect2Fix()
                <a href="${TINY_CONTEXT_PATH+adminPath}/org/user/form">增加</a>
                <a href="${TINY_CONTEXT_PATH+adminPath}/org/user/list" class="r">全部</a>
                #end
            #end
        #end
    #end
    #@elementItem()
        #@sdpmItem("项目描述")
            #@Teditor("projectDesc" "content" {"initialFrameHeight":"200","initialFrameWidth":
                "702"})${project?.projectDesc}#end
        #end
    #end
    #@elementItem()
        #@sdpmItem("访问控制")
            #@formControlDiv("skin-minimal col-10")
                #foreach(acl : getDict("projectAcl"))
                    #@tinyRadio("projectAcl" acl.value project?.projectAcl)${acl.text}#end
                #end
            #end
        #end
    #end
    #@elementItem(elementId="whitelistBox" eleItemClass="hidden hidden_namesty")
        #@skinMinimal("col-8")
            #@Tcheckboxes("whiteList" project?.projectWhiteList)
                #foreach(wl : getDict("whiteList"))
                    #@gridSysCol(2)
                        #@Tcheckbox(wl.value)${wl?.text}#end
                    #end
                #end
            #end
            #@validateDiv("col-2")#end
        #end
    #end
    #@elementItem()
    <div class="col-12">
        <div class="col-5">

        </div>
        <div class="col-1">
            <button style="float: left" type="submit" id="submit" class="commitBtn">保存</button>
        </div>
        <div class="col-1">
            #@aExtendButton("btn-sm backBtn" "javascript:history.go(-1)")取消#end
        </div>
        <div class="col-5"></div>
    </div>
    #end
#end



<script type="text/javascript">

    $(function () {
        $("form").Validform({});

        $("input[name='projectAcl']").click(function (e) {
            $(this).attr("value") == "3" ? $("#whitelistBox").removeClass("hidden") : $("#whitelistBox").addClass("hidden");
        })
    });

</script>
