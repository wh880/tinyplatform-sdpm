#import("/org/tinygroup/form/components/form.component")
#import("/org/tinygroup/bootstrapDate/components/bootstrapDate.component")
#import("/org/tinygroup/button/components/button_common.component")
#import("/org/tinygroup/button/components/button.component")
#import("/org/tinygroup/fold/components/fold.component")
#macro labelRadio1(rId rName rValue rClass radioOther labelText)
    #@radioBox()
        #radio1(rId=rId rName=rName rValue=rValue rClass=rClass radioOthe=radioOther)
        #@label(ckId)${labelText}#end
    #end
#end
#macro radio1(rId rName rChecked rValue rClass rIsDisabled radioOther)
<input#if(rId) id="$!{rId}"#{end}#if(rName) name="$!{rName}"#end#if(rChecked && rChecked=="checked")
               checked#{end}#if(rValue) value="$!{rValue}"#end#if(rClass)
               class="$!{rClass}"#end#if(rIsDisabled && rIsDisabled=="disabled") disabled#end type="radio"
               onclick="${radioOther}"/>
#end


#set(name="task")
#@div()
    #@tabWithInit("tab_demo" "optionsBox")
        #@div(divClass="dropdownBox")
            #include("/project/dropdownMenu.page")
        #end
        #@tabHead()
            #include("/project/protab.page")
        #end
    ##head end
    <br/>
    ##body end
    #end
#end


#@tinyForm("thisform" TINY_CONTEXT_PATH+adminPath+"/project/add" "" {"class":"test"})

<div style="width:100%;float:left" class="pageleftpart">
<div class="infoContent">
    <p class="titleName">添加</p>
    #@elementItem()
        #@sdpmItem("项目名称" "*")
            #tinyInput("text" "projectName" ""{"placeholder":"请输入项目名称","datatype":"*","nullmsg":"项目名称不能为空！",
                "class":"input-text"})
        #end
    #end
    #@elementItem()
        #@sdpmItem("项目代号" "*")
            #tinyInput("text" "projectCode" ""{"placeholder":"请输入项目代号","datatype":"*","nullmsg":"项目代号不能为空！",
                "class":"input-text"})
        #end
    #end
    #@elementItem()
        #@sdpmItem("起始日期" "*")
            #@tinyDateInput(
                "projectBegin" "" "YYYY-MM-DD" {"style":"width:275px","datatype":"*","nullmsg":"开始日期不能为空","placeholder":
                "选择日期"})#end
        #end
    #end
    #@elementItem()
        #@sdpmItem("结束日期" "*")
            #@tinyDateInput(
                "projectEnd" "" "YYYY-MM-DD" {"style":"width:275px","datatype":"*","nullmsg":"结束日期不能为空","placeholder":
                "选择日期"})#end

        #end
    #end
    #@elementItem()
        #@sdpmItem("可用工作日")
            <div class="input-group">
                <input name="projectDays" type="text" class="form-control" placeholder=""
                       aria-describedby="basic-addon2" datatype="n">
                <span class="input-group-addon" id="basic-addon2">小时</span>
            </div>
        #end
    #end

    #@elementItem()
        #@sdpmItem("项目类型")
            #@Tselect2F()
                #@Tselect2Body("projectType" "0" {"class":"input-text select2"}) ##,"multiple":"multiple"加上为多选项
                    <option value="">/</option>
                    #foreach(type : getDict("projectType"))
                        <option value=${type.value}>${type.text}</option>
                    #end
                #end
            #end
        #end
    #end

##
    #@elementItem()
        #@sdpmItem("团队名称" "*")
            #tinyInput("text" "projectTeam" ""{"placeholder":"请输入团队名称","datatype":"*","nullmsg":
                "团队名称不能为空","class":"input-text"})
        #end
    #end
    #@elementItem()
        #@sdpmItem("关联产品")
        ###tinyInput("text" "username" ""{"style":"width:300px","placeholder":"","datatype":"*4-16","nullmsg":"标题不能为空！","id":"username","class":"input-text"})
            #@tinySelect("linkProduct" "zh" {"class":"input-text select2","rel":"22","multiple":"multiple"})
                #for(p : prodcutList)
                #@tinyOptionItem(p.productId)${p.productName}#end
            #end
        #end
    #end
#end
#@elementItem()
    #@sdpmItem("项目描述")
        #@Teditor("projectDesc" "content" {"initialFrameHeight":"200","initialFrameWidth":"550"})#end
    #end
#end
###@elementItem()
##    #@colLabel()访问控制：#end
##    #@skinMinimal("col-8")
##        #labelRadio1(rId="aclopen" rName="projectAcl" rValue="1" labelText="默认设置(有项目视图权限，即可访问)"
##            "setWhite(this.value);")
##        #labelRadio1(rId="aclcustom" rName="projectAcl" rValue="2" labelText="私有项目(只有项目团队成员才能访问)"
##            "setWhite(this.value);")
##        #labelRadio1(rId="aclcustom" rName="projectAcl" rValue="3" labelText="自定义白名单(团队成员和白名单的成员可以访问)"
##            "setWhite(this.value);")
##
##    #end
##    #@validateDiv("col-2")#end
###end
#@elementItem()
    #@sdpmItem("访问控制")
        #@formControlDiv("skin-minimal col-9")
            #foreach(acl : getDict("projectAcl"))
                #@tinyRadio("projectAcl" acl.value "")${acl.text}#end
            #end
        ##            #@tinyRadio("projectAcl" "1" "man")默认设置(有项目视图权限，即可访问)#end
        ##            #@tinyRadio("projectAcl" "2" "man")私有项目(只有项目团队成员才能访问)#end
        ##            #@tinyRadio("projectAcl" "3" "man")自定义白名单(团队成员和白名单的成员可以访问)#end
        #end
    #end
#end
#@elementItem(elementId="whitelistBox" eleItemClass="hidden hidden_namesty")
    #@colLabel()分组白名单#end
    #@skinMinimal("col-8")
        #@Tcheckboxes("whiteList" "")
            #foreach(wl : getDict("whiteList"))
                #@gridSysCol(2)
                    #@Tcheckbox(wl.value)${wl?.text}#end
                #end
            #end
        #end
        #@validateDiv("col-2")#end
    #end
#end

    <br/>
</div>
#@elementItem()
    <div class="col-12">
        <div class="col-5">

        </div>
        <div class="col-1">
            <button style="float: left" type="submit" id="submit" class="commitBtn">保存</button>
        </div>
        <div class="col-1">
            #@aExtendButton("btn-sm backBtn" "javascript:history.go(-1)")取消#end
        </div>
        <div class="col-5"></div>
    </div>
#end
    <br>
</div>
#end

<script type="text/javascript">

    $(function () {
        $("form").Validform({});

        $("input[name='projectAcl']").click(function (e) {
            $(this).attr("value") == "3" ? $("#whitelistBox").removeClass("hidden") : $("#whitelistBox").addClass("hidden");
        })
    });

</script>