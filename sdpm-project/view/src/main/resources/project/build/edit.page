#import("/org/tinygroup/form/components/form.component")
#import("/org/tinygroup/bootstrapDate/components/bootstrapDate.component")
#import("/org/tinygroup/button/components/button_common.component")
#import("/org/tinygroup/button/components/button.component")
#import("/org/tinygroup/fold/components/fold.component")

#set(name="version")
#@div()
    #@tabWithInit("tab_demo" "optionsBox")
        #@div(divClass="dropdownBox")
            #include("/project/dropdownMenu.page")
        #end
        #@tabHead()
            #include("/project/protab.page")
        #end
    <br/>
    #end
#end

#@tinyForm("thisform" TINY_CONTEXT_PATH+adminPath+"/project/build/addSave" post {"class":"test","enctype":
    "multipart/form-data"})
    #hiddenInput(hiddenInputName="buildId" hiddenInputValue=build?.buildId)
    <input type="hidden" name="buildProject" value="${build?.buildProject?:currentProjectId}">
<div class="infoContent">
    <p class="titleName">新建/编辑版本</p>

    #@elementItem()
        #@sdpmItem("产品")
            #@Tselect2F()
                #@Tselect2Body(
                    "buildProduct" build?.buildProduct {"class":"input-text select2"}) ##,"multiple":"multiple"加上为多选项

                    #foreach(p : productList)
                        <option value="${p.productId}">${p.productName}</option>
                    #end
                #end
            ##填写任意内容，侦听需重新填加 A侦听已内置
                #@Tselect2Fix()
                    #set(m=menuManager.getMenu("newproduct"))
                    #if(m)
                        <a href="${TINY_CONTEXT_PATH+adminPath}${m.href}" class="r">增加</a>
                    #end
                    #set(m=menuManager.getMenu("allproduct"))
                    #if(m)
                        <a href="${TINY_CONTEXT_PATH+adminPath}${m.href}">全部</a>
                    #end
                #end
            #end
        #end
    #end
    #@elementItem()
        #@sdpmItem("名称编号")
            #tinyInput(
                "text" "buildName" build?.buildName {"style":"width:43%","placeholder":"","datatype":"*4-16","nullmsg":
                "标题不能为空！","id":"username","class":"input-text"})
        #end
    #end
    #@elementItem()
        #@sdpmItem("构建者")
            #@Tselect2F()
                #@Tselect2Body(
                    "buildBuilder" build?.buildBuilder {"class":"input-text select2"}) ##,"multiple":"multiple"加上为多选项
                    #foreach(t : teamList)
                        <option value="${t.orgUserId}">${t.orgUserRealName}</option>
                    #end
                #end
            ##填写任意内容，侦听需重新填加 A侦听已内置
                #@Tselect2Fix()
                    #set(m=menuManager.getMenu("organizationAddUser"))
                    #if(m)
                        <a href="${TINY_CONTEXT_PATH+adminPath}${m.href}" class="r">增加</a>
                    #end
                    #set(m=menuManager.getMenu("organizationUser"))
                    #if(m)
                        <a href="${TINY_CONTEXT_PATH+adminPath}${m.href}">全部</a>
                    #end
                #end
            #end
        #end
    #end
    #@elementItem()
        #@sdpmItem("打包日期")
            #@formHorizontal()
                #@tinyDateInput(
                    "buildDate" formatDate(build?.buildDate,
                    "yyyy-MM-dd") "YYYY-MM-DD" {"datatype":"*","placeholder":"选择日期"})
                #end
            #end
        #end
    #end

    #@elementItem()
        #@sdpmItem("源代码地址")
            #tinyInput(
                "text" "buildScmPath" build?.buildScmPath{"style":"width:43%","placeholder":"","datatype":"*4-16",
                "nullmsg":"标题不能为空！","id":"username","class":"input-text"})
        #end
    #end

    #@elementItem()
        #@sdpmItem("下载地址")
            #tinyInput(
                "text" "buildFilePath" build?.buildFilePath{"style":"width:300px","placeholder":"","datatype":"*4-16",
                "nullmsg":"标题不能为空！","id":"username","class":"input-text"})
        #end
    #end
    #@elementItem()
        #@sdpmItem("附件")
            #@formControlDiv("col-8")
                #tinyUploadInput("inputName" "" {"style":"width:43%","placeholder":"可直接输入地址，也可点击下图标进行上传"})
            #end
        #end
    #end
    #@elementItem()
        <div class="col-2 text-r">
            <label>描述：&nbsp;</label>
        </div>
        <div class="col-8 form-item-body">
            #@tinyueditor("contentid" "buildDesc" "width:40%;overflow:auto")${build?.buildDesc}#end
        </div>
    #end
    #@elementItem()
        <div class="col-12">
            <div class="col-5">
            </div>
            <div class="col-1">
                <button style="float: left" type="submit" id="submit" class="commitBtn">保存</button>
            </div>
            <div class="col-1">
                #@aExtendButton("btn-sm backBtn" "javascript:history.go(-1)")取消#end
            </div>
            <div class="col-5"></div>
        </div>
    #end

#end
