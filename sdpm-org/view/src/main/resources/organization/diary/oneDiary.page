#@elementItem()
    #@tinyForm("thisform" call("link",adminPath+"/org/diary/add") "post")
    <div class="col-8 col-offset-2">

        #@Teditor(
            "summary" "summary" {"initialFrameHeight":"200","placeholder":"请输入本周总结"})${orgDiary?.orgDiarySummary}#end
        #@simpleDiv("line")#end
        #if(list!=null)
    <h4 class="mt-10">本周日志情况：</h4>
            #@simpleDiv("line")#end

            #for(var:list)
        <div class="committed clearfix mt-10 va-m bk-gray radius pd-20 mt-10">
            <ol class="logList-detailList">
                <li><input type="checkbox" id=${var?.effortId} value=${var?.effortId} name="idCheck"><span class="tocommittime">周${var?.effortWeek}:</span><span>${var?.effortAccount}--${var?.effortWork}
                    <a href="#" target="_blank">ID：${var?.effortId}</a></span></li>
            </ol>
        </div>
        #end
    </div>
    #end
<input type="hidden" id="efforts" name="efforts">
<input type="hidden" id="y" name="y" value=${year}>
<input type="hidden" id="w" name="w" value=${week}>
<div class="col-8 col-offset-2">
    <div class="col-1">
        <button style="float: left" type="submit" id="submit2" class="commitBtn" onclick="beforeSub()">保存</button>
    </div>
    <div class="col-1">
        #@aExtendButton("btn-sm backBtn" "javascript:history.go(-1)")取消#end
    </div>
</div>
#end
#end

<script>
    $(function () {
        $("form[name=thisform]").Validform({
            beforeSubmit: function (curform) {
                var checks=document.getElementsByName("idCheck");
                var mes="";
                for(var i=0;i<checks.length;i++){
                    if(checks[i].checked==true){
                        mes=mes+checks[i].value+",";
                    }
                }
                $("#efforts").val(mes);
                $(curform).ajaxSubmit({
                    dataType: "json",
                    success: function (data) {
                        if (data.status == "y" || data.status == "success") {
                            layer.msg(data.info, 2, 1, function () {
                                $(curform).closest(".modal").trigger("close");
                            });
                        } else {
                            layer.msg(data.info);
                        }
                    },
                    error: function () {
                        layer.msg(data.info);
                    }
                });
                return false;
            }
        });
    });

</script>