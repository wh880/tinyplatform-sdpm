<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <link rel="shortcut icon" href="${TINY_CONTEXT_PATH}/common/img/tiny32.png">
    <meta name="keywords" content="Tiny SDPM ">
    <meta name="description" content="Tiny,TINY,Software Development Process Management">
    <title>Tiny SDPM登陆</title>
    <style>
body{font-family:'Microsoft Yahei'; margin:0 auto;background:#1c77ac; background-image:url(${TINY_CONTEXT_PATH}/login/images/light.png) no-repeat center top;}
ul,li{display:block;margin:0;padding:0;list-style:none;height:100%;}
a,a:focus{text-decoration:none;color:#000;outline:none;blr:expression(this.onFocus=this.blur());}
a:hover{color:#00a4ac;text-decoration:none;}

/*cloud*/
#mainBody {width:100%;position:absolute;z-index:-1;}
.cloud {position:absolute;top:-100px;left:0px;width:100%;height:100%;background:url(${TINY_CONTEXT_PATH}/login/images/cloud.png) no-repeat;z-index:1;opacity:0.5;}
#cloud2 {z-index:2;}


/*login*/
.loginbody{font-size:9pt;background:url(${TINY_CONTEXT_PATH}/login/images/loginbg3.png) no-repeat center center; width:100%;position:absolute;height:96%}
.loginbox{width:692px; height:336px;background:url(${TINY_CONTEXT_PATH}/login/images/logininfo.png) no-repeat; overflow:auto;position:absolute;margin-top:-168px;top:50%;left:50%;margin-left:-346px;}
.loginbox ul{margin-top:88px; margin-left:285px;}
.loginbox ul li{margin-bottom:25px;width:299px;}
.loginbox ul li label{color:#687f92; padding-left:25px;}
.loginbox ul li label a{color:#687f92;}
.loginbox ul li label a:hover{color:#3d96c9;}
.loginbox ul li label input{margin-right:5px;font-weight:bold;}
.loginuser{font-family:"Microsoft Yahei";width:299px; height:46px; background:url(${TINY_CONTEXT_PATH}/login/images/loginuser.png) no-repeat; border:none; line-height:46px; padding-left:44px; font-size:14px;}
.loginpwd{font-family:"Microsoft Yahei";width:299px; height:46px; background:url(${TINY_CONTEXT_PATH}/login/images/loginpassword.png) no-repeat; border:none;line-height:46px; padding-left:44px; font-size:14px; color:#90a2bc;}
.loginbtn{font-family:"Microsoft Yahei";width:111px;height:35px; background:url(${TINY_CONTEXT_PATH}/login/images/buttonbg.png) repeat-x; font-size:14px; font-weight:bold; color:#fff;cursor:pointer; line-height:35px;border:none}
#login_tip{height:5px;margin-top:-18px;color:#c00}
</style>
    <script src="${TINY_CONTEXT_PATH}/uiengine.uijs"></script>
</head>
<body>

<div id="mainBody">
    <div id="cloud1" class="cloud"></div>
    <div id="cloud2" class="cloud"></div>
</div>
<div class="loginbody">
    <div class="loginbox">
        <form class="loginForm" method="post" role="form" action="${TINY_CONTEXT_PATH}/login">
            <ul>
                <li><p id="login_tip">${msg}</p></li>
                <li id="login_input1"><input name="username" type="text" class="loginuser" id="loginuser"
                                             placeholder="请输入用户名"/></li>
                <li id="login_input2"><input name="password" type="password" class="loginpwd" id="loginpwd"
                                             placeholder="请输入密码"/></li>
                <li id="login_btn">
                    <input type="submit" class="loginbtn" value="登录"/>
                    <label><input name="rememberMe" type="checkbox"/>记住密码</label>
                ##                    <label><a href="#">忘记密码？</a></label>
                </li>
            </ul>
        </form>
    </div>
</div>
</body>
<script type="text/javascript">
    // 登录验证
    $("#login_content_log").on('click', function () {
        $("#login_content_log,#login_content_reg").fadeOut();
        $("#login_content_log_02").fadeIn();
    });
    $("#login_close").on('click', function () {
        $("#login_content_log,#login_content_reg").fadeIn();
        $("#login_content_log_02").fadeOut();
    });
    $("#loginuser").on('focus', function () {
        $(this).css('color', 'black');
        if ($(this).val() == "用户名") {
            $(this).val('');
        }
        $("#login_input1").css('borderColor', '#0099cc').css('box-shadow', '#0099cc 0px 0px 3px');
    }).on('blur', function () {
        $(this).css('color', 'gray');
        if ($(this).val() == '') {
            $(this).val('用户名');
        }
        $("#login_input1").css('borderColor', 'gray').css('box-shadow', 'none');
    });
    $("#loginpwd").on('focus', function () {
        $(this).css('color', 'black');
        //document.getElementById("loginpwd").type = 'loginpwd';
        $("#loginpwd[type='text']").attr('type', 'loginpwd');
        if ($(this).val() == "密码") {
            $(this).val('');
        }
        $("#login_input2").css('borderColor', '#0099cc').css('box-shadow', '#0099cc 0px 0px 3px');
    }).on('blur', function () {
        $(this).css('color', 'gray');
        //document.getElementById("loginpwd").type = 'text';
        $("#loginpwd[type='loginpwd']").attr('type', 'text');
        if ($(this).val() == '') {
            $(this).val('密码');
        }
        $("#login_input2").css('borderColor', 'gray').css('box-shadow', 'none');
        if ($(this).val() != '' && $(this).val() != "密码") {
            //document.getElementById("loginpwd").type = 'loginpwd';
            $("#loginpwd[type='text']").attr('type', 'loginpwd');
        }
    });

    $("#login_btn1 .loginbtn1").on('click', function () {//登陆按钮
        var user = $("#loginuser").val();
        var loginpwd = $("#loginpwd").val();
        if (user == '') {
            //$("#login_tip").val("用户名不能为空");
            document.getElementById('login_tip').innerHTML = "用户名不能为空";
            $("#loginuser").focus();
            return false;
        }
        else if (loginpwd == '') {
            //$("#login_tip").val("密码不能为空")
            document.getElementById('login_tip').innerHTML = "密码不能为空";
            $("#loginpwd").focus();
            return false;
        }
        else {
            //ajax请求
            /*$.ajax({
                type:"POST",
                url:"ajax.jsp?action=login",
                dataType:"json",
                data:{"user":user,"loginpwd":loginpwd},
                beforeSend:function(){
                    document.getElementById("login_tip").innerHTML = "登录中..."
                    },
                success:function(json){
                    if(json.success == 1){
                        document.getElementById("welcome_user").innerHTML = json.user;
                        $("#login_content_log_02").fadeOut();
                        $("#login_content_log_03").fadeIn();
                        //alert(getCookie(user));
                        t1 = setTimeout("window.location.href='index.jsp'",3000);}
                        else{
                            document.getElementById("login_tip").innerHTML = json.msg;}
                    }

                });}*/

            document.getElementById("login_tip").innerHTML = "登录中...";
//            t = setTimeout("demo()", 1500);
        }
    });
    function demo() {//效果测试
        var user = $("#loginuser").val();
        var loginpwd = $("#loginpwd").val();
        if (user == "admin" && loginpwd == "123456") {
            $("#login_content_log_02").fadeOut();
            $("#login_content_log_03").fadeIn();
            //t1 = setTimeout("window.location.href='login.html'",3000);
        }
        else {
            document.getElementById("login_tip").innerHTML = "账号或密码错误";
        }
    }

    $("#exit_button").on('click', function () {
        $.post("ajax.XXX?action=exit");
    });
</script>
</html>



