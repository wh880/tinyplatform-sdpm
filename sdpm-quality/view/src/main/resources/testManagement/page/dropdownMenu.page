#if(!qualityProductIdTemp&&qualityProductId)
<script type="text/javascript">
    $(function(){
        $.cookie('qualityProductId', "${qualityProductId}", {path: "/"});
    })
</script>
#end

#if(qualityProductId&&ProductUtils.getAllProductListByUser()?.size()>0)
    #set(finded = 0)
    #foreach(product : ProductUtils.getAllProductListByUser())
    #if(product?.productId == qualityProductId)
        #set(finded=1,currentProductName=product.productName)
    #end
#end
#if(finded==0)
<script type="text/javascript">
    $.removeCookie('qualityProductId',{path:"/"})
    //window.location.href='http://localhost:8989/sdpm-web/a/project/task/index';
    window.location.reload();
</script>
#end
#else
    #if(ProductUtils.getAllProductListByUser()?.size()==0)
    <script type="text/javascript">
            #set(msg="目前没有产品，现在将前往添加。")
            #if(ProductUtils.getProductList().size()>0)
                #set(msg="目前没有你可访问的产品，现在将前往添加。")
            #end
        $(function(){
            var url = window.location.pathname;
            if(url.indexOf("addproduct")<0){
                layer.msg('${msg}<div style="text-align:center"><a href="${TINY_CONTEXT_PATH+adminPath}/product/addproduct/addition"><span id="showTime">5</span>秒后前往</a></div>',5,-1,function(){
                    window.location.href = "${TINY_CONTEXT_PATH+adminPath}/product/addproduct/addition";
                });
                var timeVal=5;
                function changeTimeVal(){
                    $("#showTime").html(--timeVal);
                    window.setTimeout(function(){
                        changeTimeVal();
                    },1000);
                }
                changeTimeVal();
            }
        })
    </script>
    #end
#end

#set(qualityProductIdTemp = qualityProductId,qualityProductId=qualityProductId?:ProductUtils.getAllProductListByUser()?.get(0)?.productId)
#@navZtree("product" "product")
    #@navZtreeNav()
        <span id="productNameOnTop" value="${qualityProductId}">${currentProductName}</span><span class="caret"></span>
    #end

    #@navZtreeBody({"style":"left:-18px;top:26px"})
        #@TzTreeSelect("aaaa" "" {"class":"input-text blueline search-ico-bg","data-URL":call("link",adminPath+"/productLine/userProductTree"),"id":"productSelect"})
        <a href="${TINY_CONTEXT_PATH+adminPath}/product/addproduct/addition" class="r">增加</a> <a href="${TINY_CONTEXT_PATH+adminPath}/product/allproduct/addition">全部</a>
        #end

    ##hiddenInput("productIdHidden","productId","","")

    <script type="text/javascript">

        $(function(){
            $("#productSelect").on("setValue",function(o,treeNode){
                var dataValue = treeNode.id;
                $.cookie('qualityProductId',dataValue,{path:"/"});
                window.location.reload();
            });
        });

    </script>
    #end
#end

