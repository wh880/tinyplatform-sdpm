#import("/org/tinygroup/button/components/button_smart.component")
#import("/org/tinygroup/button/components/button_common.component")
#import("/org/tinygroup/button/components/button.component")
#!set(activeTitle="测试管理",activeMenuId=currentPageId)

#set(name="qualityBug")
#@div()
	#@tabWithInit("tab_demo" "optionsBox")
			#@div(divClass="dropdownBox")
				#include("/testManagement/page/dropdownMenu.page")
			#end
			#@tabHead()
				#include("/testManagement/page/Tab.page")
			#end
			
			#@tabBodyCol("ptop-5")
			##operationbar star
			#@div(divClass="operationbar")
				<span class="f">
#*					<a href="#" class="active_btn">未关闭</a>*#
#*					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page" class="active_btn">未关闭</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page">所有</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page">指派给我</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page">由我创建</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page">由我解决</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page">未确认</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page">未指派</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page">未解决</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page">久未处理</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page">被延期</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page">需求变动</a>
					<a href="#" id="showsearchmore">#buttonIcon(iconClass="icon-search")搜索</a>*#
					#foreach(m:menuManager.getScopeMenus("testbugleft-tab"))
						#if(m.id != "tsearch")
							<a href="${TINY_CONTEXT_PATH}${m.href}"  ${m.id}==${get}?class="active_btn":"">${m.name}</a>
						#else
							<a href="#" id="showsearchmore">#buttonIcon(iconClass="icon-search")搜索</a>
						#end
					#end
				</span>
				<span class="r">
			##		#set(m1=menuManager.getMenu("tbugoutput"))
					#foreach(m:menuManager.getScopeMenus("testbug-tab"))
    				#if(m.id=="tbugoutput")
    					#@buttonGroup()
		                    		#@buttonDropdown("more" buttonClass="btnDropDown")#buttonIcon(iconClass="icon-upload-alt")导出 
		                     			#@spanCaret()#end
		                    		#end
		                    		#@ulDropdownMenu("downMenuSty")                       
		                         		<p>
		                             		#@aModal("#myModal" "导出数据" "550" "100" "" "/testManagement/page/tabledemo/exportBugTemplet.pagelet")导出数据#end
		                         		</p>
		                         		<p>
 											#@aModal("#myModal" "导出模板" "550" "100" "" "/testManagement/page/tabledemo/exportBugTemplet.pagelet")导出模版#end		                         </p>	
		                       			</p>
		                       			 #@liDivider()#end
		                   			#end
		                #end&nbsp;
    				#else
    					#if(m.id=="tbuginput")
    						#@aModal("#myModal" m.name "400" "80" "" m.href "ml-5")
								#buttonIcon(iconClass=m.icon)${m.name}#end&nbsp;
						#else
							<a href="${TINY_CONTEXT_PATH}${m.href}">#buttonIcon(iconClass=m.icon)${m.name}</a>&nbsp
    					#end
    				#end
    				#end
    									
		                #@dialog("myModal")
								#@dialogHeader()#end
								#@dialogBody()<p></p>#end
								#@dialogFooter()
									#@buttonEnsure()确定#end
								    #@buttonCancel()关闭#end
							  	#end
						#end
                    
			##		<a href="${TINY_CONTEXT_PATH}/testManagement/page/reportform.page">#buttonIcon(iconClass="icon-plus-sign")报表</a>&nbsp;
			##		<a href="${TINY_CONTEXT_PATH}/testManagement/page/proposeBug.page">#buttonIcon(iconClass="icon-plus")建Bug</a>
				</span>
				#div(divClass="clearfix")
				#include("/testManagement/page/mulsearch.page")
			#end
			##operationbar end
			#end
			
			#@toggleBox({"class":"open"})
				#@toggleLeft({"class":"aclass"})
					#@settoggleLeftTitle()管理系统#end
					#@settoggleLeftBody("treeLeftbox")
						#include("/testManagement/page/moduleTree.page")
					#end
				#end
			
			#@toggleRight()
			#@tinyTable()
				#@div(divBaseClass="tinyheaderTools form-inline")
					<div class="f col-3">
						<input type="button" value="全选" class="btn btn-default btn-primary col-3" 
						onclick="selectAllNullorReserve('userid','全选');" />											
						<div class="col-0">&nbsp&nbsp</div>
						<input type="button" value="反选" class="btn btn-default btn-primary col-3"
						 onclick="selectAllNullorReserve('userid','反选');" />						
						<div class="col-0">&nbsp&nbsp</div>
						<div class="dropdown col-3">
							<a id="" role="button" data-toggle="dropdown" class="btn btn-primary" data-target="#" href="javascript:void(0);">编辑<span class="caret"></span></a>
							<ul class="dropdown-menu multi-level" role="menu">
								<li>
									#foreach(m:menuManager.getScopeMenus("testbug-op"))
										#if(m.id=="tmakesure")
											<a href="${TINY_CONTEXT_PATH}${m.href}">
												${m.name}</a>
										#end
									#end
								</li>
								<li>
									#foreach(m:menuManager.getScopeMenus("testbug-op"))
										#if(m.id=="tversiondelete")
											<a href="${TINY_CONTEXT_PATH}${m.href}">
												${m.name}</a>
										#end
									#end
								</li>
								<li class="dropdown-submenu">
									#foreach(m:menuManager.getScopeMenus("testbug-op"))
									#if(m.id=="tsolution")
									<a tabindex="-1" href="javascript:void(0);">解决</a>
									<ul class="dropdown-menu">
										<li>
											<a tabindex="-1" href="${TINY_CONTEXT_PATH}/testManagement/page/tabledemo/solution.page">设计如此</a>
										</li>
										<li>
											<a tabindex="-1" href="${TINY_CONTEXT_PATH}/testManagement/page/tabledemo/solution.page">外部原因</a>
										</li>
										<li class="dropdown-submenu">
											<a href="javascript:void(0);">
												已解决</a>
											<ul class="dropdown-menu">
												<li>
													<a href="${TINY_CONTEXT_PATH}/testManagement/page/tabledemo/solution.page">Admin</a>
												</li>
												<li>
													<a href="${TINY_CONTEXT_PATH}/testManagement/page/tabledemo/solution.page">Trunk</a>
												</li>
											</ul>
										</li>
										<li>
											<a href="${TINY_CONTEXT_PATH}/testManagement/page/tabledemo/solution.page">延期解决</a>
										</li>
									</ul>
									#end
									#end
								</li>
								<li class="dropdown-submenu">
								#foreach(m:menuManager.getScopeMenus("testbug-op"))
									#if(m.id=="tassign")
									<a tabindex="-1" href="javascript:void(0);">
											指派给</a>
									<ul class="dropdown-menu">
										<li>
											<a tabindex="-1" href="${TINY_CONTEXT_PATH}/testManagement/page/tabledemo/assign.page">
											admin</a>
										</li>
										<li>
											<a tabindex="-1" href="${TINY_CONTEXT_PATH}/testManagement/page/tabledemo/assign.page">
											admin1</a>
										</li>										
									</ul>
									#end
									#end
								</li>
							</ul>
						</div>
#*						<div class="col-2">
							#@mulOperation("muldelete" "http://127.0.0.1:8080/sqdm-quality/testManagement/page/Bug.page")
							<a href="javascript:;" class="btn radius btn-danger "><i class="icon-trash"></i>批量删除</a>#end
						</div>*#
					</div>					
					#setTinyTablePageSize([10,20,50,100,200,35]) ##每页数据条数设置
				#end
		##	#set(requestStatuString = tinyRequestQueryString!=null ?"&"+tinyRequestQueryString:"")
			#@tinyTableContent(TINY_CONTEXT_PATH+"/quality/bug/findBug?id=1")
				#@thead()
					#@tr()
						#@tinyTh({"width":"6"})<input type="checkbox" name="" value="" />#end
						#@tinyTh({"class":"sorting","rel":"bug_id"})ID#end
						#@tinyTh({"class":"sorting","rel":"bug_severity"})级别#end
						#@tinyTh({"class":"sorting","rel":"priority"})P#end
						#@tinyTh({"class":"sorting","rel":"bug_title"})Bug标题#end
						#@tinyTh({"class":"sorting","rel":"bug_status","style":"color:#333"})状态#end
						#@tinyTh({"class":"sorting","rel":"bug_opened_by"})创建#end
						#@tinyTh({"class":"sorting","rel":"bug_opened_date"})创建日期#end
						#@tinyTh({"class":"sorting","rel":"bug_assigned_to"})指派给#end
						#@tinyTh({"class":"sorting","rel":"bug_resolved_by"})解决#end
						#@tinyTh({"class":"sorting","rel":"bug_resolution"})方案#end
						#@tinyTh({"class":"sorting","rel":"bug_resolved_date"})解决日期#end
						#@tinyTh({"class":"","rel":""})操作#end
					#end
				#end
				<script type="text/javascript">
				$(function(){
					$('#${tableId}').on('click','.delBtn',function(e){
						user_del(this,'1');
					});
				})
			</script>
			#end
			#end
			##tinytable end
			#end
			##toggle rigth end
		#end
		##toggle end
	#end
	##tab end
#end
##全选和反选的JS
<script type="text/javascript">
function selectAllNullorReserve(obj,type){
   if(obj!=null&&obj!=""){
    if(document.getElementsByName(obj)!=undefined&&document.getElementsByName(obj).length>0){	//getElementsByName函数的作用按名字查找对象，返回一个数组。
     var userids = document.getElementsByName(obj);
     if(type=="全选"){
      for(var i=0;i<userids.length;i++){
       if(userids[i].checked == false){
        userids[i].checked = true;
       }
      }
     }else if(type=="全不选"){
      for(var i=0;i<userids.length;i++){
       if(userids[i].checked == true){
        userids[i].checked = false;
       }
      }
     }else if(type=="反选"){
      for(var i=0;i<userids.length;i++){
       if(userids[i].checked == true){
        userids[i].checked = false;
       }else{
        userids[i].checked = true;
       }
      }
     }
    }
   }  
}
</script>