#import("/org/tinygroup/button/components/button_smart.component")
#import("/org/tinygroup/button/components/button_common.component")
#import("/org/tinygroup/button/components/button.component")
#!set(activeTitle="测试管理",activeMenuId=currentPageId)

#set(name="qualityBug")
#@div()
	#@tabWithInit("tab_demo" "optionsBox")
			#@div(divClass="dropdownBox")
				#include("/testManagement/page/dropdownMenu.page")
			#end
			#@tabHead()
				#include("/testManagement/page/Tab.page")
			#end
			
			#@tabBodyCol("ptop-5")
			##operationbar star
			#@div(divClass="operationbar")
				<span class="f">
#*					<a href="#" class="active_btn">未关闭</a>*#
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page" class="active_btn">未关闭</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page">所有</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page">指派给我</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page">由我创建</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page">由我解决</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page">未确认</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page">未指派</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page">未解决</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page">久未处理</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page">被延期</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/Bug.page">需求变动</a>
					<a href="#" id="showsearchmore">#buttonIcon(iconClass="icon-search")搜索</a>
				</span>
				<span class="r">
					#@iconOperations("#myModal" "icon-download-alt" "导入" "400" "80" "/testManagement/page/tabledemo/importBug.pagelet" "ml-5")&nbsp导入#end
					
					#@buttonGroup()
		                    #@buttonDropdown("more" buttonClass="btnDropDown")#buttonIcon(iconClass="icon-upload-alt")导出 
		                     	#@spanCaret()#end
		                    #end
		                    #@ulDropdownMenu("downMenuSty")                       
		                         <p>
		                             #@aModal("#myModal" "导出数据" "550" "100" "" "/testManagement/page/tabledemo/exportBugData.pagelet")导出数据#end
		                         </p>
		                         <p>
 									#@aModal("#myModal" "导出模板" "550" "100" "" "/testManagement/page/tabledemo/exportBugTemplet.pagelet")导出模版#end		                         </p>	
		                        #@liDivider()#end
		                    #end
		                #end&nbsp;
		                #@dialog("myModal")
								#@dialogHeader()对话框标题#end
								#@dialogBody()<p>对话框内容…</p>#end
								#@dialogFooter()
									#@buttonEnsure()确定#end
								    #@buttonCancel()关闭#end
							  	#end
						#end
                    
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/reportform.page">#buttonIcon(iconClass="icon-plus-sign")报表</a>&nbsp;
   ##                 <a href="${TINY_CONTEXT_PATH}/testManagement/page/BatchAdding.page">#buttonIcon(iconClass="icon-plus-sign")批量添加</a>&nbsp;
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/proposeBug.page">#buttonIcon(iconClass="icon-plus")建Bug</a>
				</span>
				#div(divClass="clearfix")
				#include("/testManagement/page/mulsearch.page")
			#end
			##operationbar end
			#end
			
			#@toggleBox({"class":"open"})
				#@toggleLeft({"class":"aclass"})
					#@settoggleLeftTitle()管理系统#end
					#@settoggleLeftBody("treeLeftbox")
						#include("/testManagement/page/moduleTree.page")
					#end
				#end
			
			#@toggleRight()
			#@tinyTable()
				#@div(divBaseClass="tinyheaderTools form-inline")
					<div class="f col-2">						
						<div class="btn btn-default btn-primary col-4" id="selectAll">全选</div>
						<div class="col-0">&nbsp&nbsp</div>
						<div class="btn btn-default btn-primary col-4" id="fx">反选</div>
												
						<div class="col-0">&nbsp&nbsp</div>
						<div class="dropdown col-1">
							<a id="" role="button" data-toggle="dropdown" class="btn btn-primary" data-target="#" href="javascript:void(0);">编辑<span class="caret"></span></a>
							<ul class="dropdown-menu multi-level" role="menu">
								<li>
									<a href="${TINY_CONTEXT_PATH}/testManagement/page/tabledemo/makesure.page">
										确认</a>
								</li>
								<li>
									<a href="${TINY_CONTEXT_PATH}/testManagement/page/tabledemo/shutdown.page">
										关闭</a>
								</li>
								<li class="dropdown-submenu">
									<a tabindex="-1" href="${TINY_CONTEXT_PATH}/testManagement/page/tabledemo/solution.page">解决</a>
									<ul class="dropdown-menu">
										<li>
											<a tabindex="-1" href="${TINY_CONTEXT_PATH}/testManagement/page/tabledemo/solution.page">设计如此</a>
										</li>
										<li>
											<a tabindex="-1" href="${TINY_CONTEXT_PATH}/testManagement/page/tabledemo/solution.page">外部原因</a>
										</li>
										<li class="dropdown-submenu">
											<a href="${TINY_CONTEXT_PATH}/testManagement/page/tabledemo/solution.page">
												已解决</a>
											<ul class="dropdown-menu">
												<li>
													<a href="${TINY_CONTEXT_PATH}/testManagement/page/tabledemo/solution.page">Admin</a>
												</li>
												<li>
													<a href="${TINY_CONTEXT_PATH}/testManagement/page/tabledemo/solution.page">Trunk</a>
												</li>
											</ul>
										</li>
										<li>
											<a href="${TINY_CONTEXT_PATH}/testManagement/page/tabledemo/solution.page">延期解决</a>
										</li>
									</ul>
								</li>
								<li class="dropdown-submenu">
									<a tabindex="-1" href="${TINY_CONTEXT_PATH}/testManagement/page/tabledemo/assign.page">
											指派给</a>
									<ul class="dropdown-menu">
										<li>
											<a tabindex="-1" href="${TINY_CONTEXT_PATH}/testManagement/page/tabledemo/assign.page">
											admin</a>
										</li>
										<li>
											<a tabindex="-1" href="${TINY_CONTEXT_PATH}/testManagement/page/tabledemo/assign.page">
											admin1</a>
										</li>										
									</ul>
								</li>
							</ul>
						</div>
					</div>					
					#setTinyTablePageSize([10,20,50,100,200,35]) ##每页数据条数设置
					###@radiusBtn("btn-danger btn-sm" "icon-trash" "javascript:;" "deleteBatch" "batchDel")&nbsp;暂时留着，后期更新新的按钮#end
#*					<a href="#" class="btn btn-default btn-sm">产品</a>
					<a href="#" class="btn btn-success btn-sm">Bug</a>
					<a href="#" class="btn btn-primary btn-sm">工程</a>
					<a href="#" class="btn btn-info btn-sm">历史</a>
					<a href="#" class="btn btn-warning btn-sm">相关</a>*#
				#end
			#@tinyTableContent("../data/BugData.pagelet")
				#@thead()
					#@tr()
						#@tinyTh({"width":"6"})<input type="checkbox" name="allck" value="" />#end
						#@tinyTh({"class":"sorting","rel":"sortname"})ID#end
						#@tinyTh({"class":"sorting","rel":"sortname"})级别#end
						#@tinyTh({"class":"sorting","rel":"sortname"})P#end
						#@tinyTh({"class":"sorting","rel":"sortname"})Bug标题#end
						#@tinyTh({"class":"sorting","rel":"sortname","style":"color:#333"})创建#end
						#@tinyTh({"class":"sorting","rel":"sortname"})指派#end
						#@tinyTh({"class":"sorting","rel":"sortname"})解决#end
						#@tinyTh({"class":"sorting","rel":"sortname"})方案#end
						#@tinyTh({"csortinglass":"sorting","rel":"sortname"})操作#end
					#end
				#end
				<script type="text/javascript">
				$(function(){
					$('#${tableId}').on('click','.delBtn',function(e){
						user_del(this,'1');
					});
				})
			</script>
#*				#@dialog("myModal")
					#@dialogHeader()对话框标题#end
					#@dialogBody()<p>对话框内容…</p>#end
					#@dialogFooter()
						#@buttonEnsure()确定#end
						#@buttonCancel()关闭#end
					#end
				#end*#
			#end
			#end
			##tinytable end
			#end
			##toggle rigth end
		#end
		##toggle end
	#end
	##tab end
#end
##全选和反选的JS
<script type="text/javascript">
window.onload = function(){
var oSelsctAll = document.getElementById("selectAll");
var oFx = document.getElementById("fx");
var aInput = document.getElementsByTagName("input");
oSelsctAll.onclick = function(){
for(var i = 0;i<aInput.length;i++){
if(aInput[i].checked == true){
aInput[i].checked = false;
}else{
aInput[i].checked = true;
}
 
}
}
oFx.onclick = function(){
for(var i = 0;i<aInput.length;i++){
aInput[i].checked = !aInput[i].checked;//“！”为非
}
}
}
</script>