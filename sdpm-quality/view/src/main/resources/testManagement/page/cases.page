#import("/org/tinygroup/button/components/button_smart.component")
#import("/org/tinygroup/table/components/tinytable.component")

#!set(activeTitle="测试管理",activeMenuId=currentPageId)


#set(name="qualityCases")
#@div()
#@tabWithInit("tab_demo" "optionsBox")
    #@div(divClass="dropdownBox")
        #include("/testManagement/page/dropdownMenu.page")
    #end
    #@tabHead()
        #include("/testManagement/page/Tab.page")
    #end

    #@tabBodyCol("ptop-5")
    ##operationbar start1
        #@div(divClass="operationbar")
        <span class="f">
        		#foreach(m:menuManager.getScopeMenus("testcaseleft-tab"))
    				#if(m.id=="tcasesee")
    					#@buttonGroup()
		                    #@buttonDropdown("more" buttonClass="btnDropDown")分组查看 
		                     	#@spanCaret()#end
		                    #end
		                    #@ulDropdownMenu("downMenuSty")                       
		                         <p>
		                             <a href="${TINY_CONTEXT_PATH}/testManagement/page/cases.page">需求分组</a>
		                         </p>	
		                        #@liDivider()#end
		                    #end
		                #end
		             #else
		             #if(m.id == "tcaseserach")
		             	<a href="#" id="showsearchmore">#buttonIcon(iconClass="icon-search")搜索</a>
		             #else
		             	<a href="${TINY_CONTEXT_PATH}${m.href}" class="${m.id==get?'active_btn':''}>${m.name}</a>
		             #end
		             #end
		         #end  				
				</span>
        <span class="r">
				#foreach(m:menuManager.getScopeMenus("testcase-tab"))
    				#if(m.id!="add-case")
    					#@aModal("#myModal" m.name "550" "100" "" m.href "ml-5")
								#buttonIcon(iconClass=m.icon)${m.name}#end
					#else                  
             			<a href="${TINY_CONTEXT_PATH}${m.href}">#buttonIcon(iconClass=m.icon)${m.name}</a>
			 		#end
		 		#end
#*					<a href="${TINY_CONTEXT_PATH}/testManagement/page/proposecase.page">#buttonIcon(iconClass=
                        "icon-plus")建用例</a>*#
				</span>
            #div(divClass="clearfix")
            #include("/testManagement/page/mulsearch.page")
        #end
    ##operationbar end
    #end
##tabbody end

#@toggleBox({"class":"open"})
	#@toggleLeft({"class":"aclass"})
    	#@settoggleLeftTitle()用例名称#end
	#@settoggleLeftBody("treeLeftbox")
    	#include("/testManagement/page/moduleTree.page")
    #end
    #end

    #@toggleRight()
#@tinyTable()
#@div(divBaseClass="tinyheaderTools form-inline")
			<div class="f col-3">
						<input type="button" value="全选" class="btn btn-default btn-primary col-3" 
						onclick="selectAllNullorReserve('userid','全选');" />											
						<div class="col-0">&nbsp</div>
						<input type="button" value="反选" class="btn btn-default btn-primary col-3"
						 onclick="selectAllNullorReserve('userid','反选');" />	
						<div class="col-0">&nbsp</div>
						<div class="dropdown col-3">
							<a id="" role="button" data-toggle="dropdown" class="btn btn-primary" data-target="#" href="javascript:void(0);">编辑<span class="caret"></span></a>
							<ul class="dropdown-menu multi-level" role="menu">
								<li>
								#foreach(m:menuManager.getScopeMenus("testcase-op"))
    								#if(m.id=="tcasedelete")
										<a href="javascript:void(0);">
											删除</a>
									#end
								#end
								</li>
								<li>
								#foreach(m:menuManager.getScopeMenus("testcase-op"))
    								#if(m.id=="texecution")
									#@iconOperations("#myModal" "" "执行" "865" "400"
										 "/testManagement/page/tabledemo/execution.pagelet" "ml-5")执行#end
									#end
								#end
								</li>																
							</ul>
						</div>
						<div class="col-2">
							#@mulOperation("muldelete" "http://127.0.0.1:8080/sqdm-quality/testManagement/page/Bug.page")
							<a href="javascript:;" class="btn radius btn-danger "><i class="icon-trash"></i>批量删除</a>#end
						</div>
					</div>
#setTinyTablePageSize([10,20,50,100,200,35]) ##每页数据条数设置


#end
#@tinyTableContent("../data/casesData.pagelet")
#@thead()
#@tr()
#@tinyTh({"width":"6"})<input type="checkbox" name="" value="">#end
#@tinyTh({"class":"sorting","rel":"sortname"})ID#end
#@tinyTh({"class":"sorting","rel":"sortname"})P#end
#@tinyTh({"class":"sorting","rel":"sortname"})用例标题#end
#@tinyTh({"class":"sorting","rel":"sortname"})类型#end
#@tinyTh({"class":"sorting","rel":"sortname","style":"color:#333"})创建#end
#@tinyTh({"class":"sorting","rel":"sortname"})执行人#end
#@tinyTh({"class":"sorting","rel":"sortname"})执行时间#end
#@tinyTh({"class":"sorting","rel":"sortname"})结果#end
#@tinyTh({"class":"sorting","rel":"sortname"})状态#end
#@tinyTh({"csortinglass":"sorting","rel":"sortname"})操作#end
#end
#end
<script type="text/javascript">
    $(function(){
    $('#${tableId}').on('click','.delBtn',function(e){
user_del(this,'1');
});
})
</script>
#@dialog("myModal")
#@dialogHeader()#end
#@dialogBody()<p>对话框内容…</p>#end
#@dialogFooter()
	#@buttonEnsure()确定#end
	#@buttonCancel()关闭#end
#end
#end
#end
#end
##tinyTable end
#end
##toggleright end
#end
##togglebox end
#end
##tab end
#end
<script type="text/javascript">
function selectAllNullorReserve(obj,type){
   if(obj!=null&&obj!=""){
    if(document.getElementsByName(obj)!=undefined&&document.getElementsByName(obj).length>0){	//getElementsByName函数的作用按名字查找对象，返回一个数组。
     var userids = document.getElementsByName(obj);
     if(type=="全选"){
      for(var i=0;i<userids.length;i++){
       if(userids[i].checked == false){
        userids[i].checked = true;
       }
      }
     }else if(type=="全不选"){
      for(var i=0;i<userids.length;i++){
       if(userids[i].checked == true){
        userids[i].checked = false;
       }
      }
     }else if(type=="反选"){
      for(var i=0;i<userids.length;i++){
       if(userids[i].checked == true){
        userids[i].checked = false;
       }else{
        userids[i].checked = true;
       }
      }
     }
    }
   }  
}
</script>