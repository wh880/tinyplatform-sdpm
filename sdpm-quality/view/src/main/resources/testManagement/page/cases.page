#import("/org/tinygroup/button/components/button_smart.component")
#!set(activeTitle="测试管理",activeMenuId=currentPageId)


#set(name="qualityCases")
#@div()
#@tabWithInit("tab_demo" "optionsBox")
    #@div(divClass="dropdownBox")
        #include("/testManagement/page/dropdownMenu.page")
    #end
    #@tabHead()
        #include("/testManagement/page/Tab.page")
    #end

    #@tabBodyCol("ptop-5")
    ##operationbar start1
        #@div(divClass="operationbar")
        <span class="f">
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/cases.page" class="active_btn">所有</a>
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/cases.page">需求变动</a>					
						#@buttonGroup()
		                    #@buttonDropdown("more" buttonClass="btnDropDown")分组查看 
		                     	#@spanCaret()#end
		                    #end
		                    #@ulDropdownMenu("downMenuSty")                       
		                         <p>
		                             <a href="${TINY_CONTEXT_PATH}/testManagement/page/cases.page">需求分组</a>
		                         </p>	
		                        #@liDivider()#end
		                    #end
		                #end
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/cases.page">零用例需求</a>
					<a href="#" id="showsearchmore">#buttonIcon(iconClass="icon-search")搜索</a>
				</span>
        <span class="r">
				
				##这里需要根据不同页面需求显示不同的图标，从版本中查看用例，显示关联用例、导出数据和返回，查看所有以当前的为准
                ##可能span f 及data中的标签也需要一起进行判断后显示
                    #@iconOperations("#myModal" "icon-download-alt" "导入" "550" "100"
                        "/testManagement/page/tabledemo/importBug.pagelet" "ml-5")&nbsp导入#end
                    #@iconOperations("#myModal" "icon-upload-alt" "导出" "550" "100"
                        "/testManagement/page/tabledemo/exportBugData.pagelet" "ml-5")&nbsp导出#end
#*                         #foreach(m:menuManager.getScopeMenus("demand-op"))
							 #if(m.id == "add-case")
             					<a href="${TINY_CONTEXT_PATH}${m.href}" title="${m.name}">#buttonIcon(iconClass=m.icon)建用例</a>
			 				#end
		 				#end*#
					<a href="${TINY_CONTEXT_PATH}/testManagement/page/proposecase.page">#buttonIcon(iconClass=
                        "icon-plus")建用例</a>
				</span>
            #div(divClass="clearfix")
            #include("/testManagement/page/mulsearch.page")
        #end
    ##operationbar end
    #end
##tabbody end

#@toggleBox({"class":"open"})
	#@toggleLeft({"class":"aclass"})
    	#@settoggleLeftTitle()用例名称#end
	#@settoggleLeftBody("treeLeftbox")
    	#include("/testManagement/page/moduleTree.page")
    #end
    #end

    #@toggleRight()
#@tinyTable()
#@div(divBaseClass="tinyheaderTools form-inline")
			<div class="f col-2">
						<input type="button" value="全选" class="btn btn-default btn-primary col-4" 
						onclick="selectAllNullorReserve('userid','全选');" />											
						<div class="col-0">&nbsp&nbsp</div>
						<input type="button" value="反选" class="btn btn-default btn-primary col-4"
						 onclick="selectAllNullorReserve('userid','反选');" />	
						<div class="col-0">&nbsp&nbsp</div>
						<div class="dropdown col-1">
							<a id="" role="button" data-toggle="dropdown" class="btn btn-primary" data-target="#" href="javascript:void(0);">编辑<span class="caret"></span></a>
							<ul class="dropdown-menu multi-level" role="menu">
								<li>
									<a href="javascript:void(0);">
										删除</a>
								</li>
								<li>
									#@iconOperations("#myModal" "" "执行" "865" "400"
										 "/testManagement/page/tabledemo/execution.pagelet" "ml-5")执行#end
								</li>																
							</ul>
						</div>
					</div>
#setTinyTablePageSize([10,20,50,100,200,35]) ##每页数据条数设置
###@radiusBtn("btn-danger btn-sm" "icon-trash" "javascript:;" "deleteBatch" "batchDel")&nbsp;批量删除#end
#*<a href="#" class="btn btn-default btn-sm">产品</a>
<a href="#" class="btn btn-success btn-sm">Bug</a>
<a href="#" class="btn btn-primary btn-sm">工程</a>
<a href="#" class="btn btn-info btn-sm">历史</a>
<a href="#" class="btn btn-warning btn-sm">相关</a>*#
#end
#@tinyTableContent("../data/casesData.pagelet")
#@thead()
#@tr()
#@tinyTh({"width":"6"})<input type="checkbox" name="" value="">#end
#@tinyTh({"class":"sorting","rel":"sortname"})ID#end
#@tinyTh({"class":"sorting","rel":"sortname"})P#end
#@tinyTh({"class":"sorting","rel":"sortname"})用例标题#end
#@tinyTh({"class":"sorting","rel":"sortname"})类型#end
#@tinyTh({"class":"sorting","rel":"sortname","style":"color:#333"})创建#end
#@tinyTh({"class":"sorting","rel":"sortname"})执行人#end
#@tinyTh({"class":"sorting","rel":"sortname"})执行时间#end
#@tinyTh({"class":"sorting","rel":"sortname"})结果#end
#@tinyTh({"class":"sorting","rel":"sortname"})状态#end
#@tinyTh({"csortinglass":"sorting","rel":"sortname"})操作#end
#end
#end
<script type="text/javascript">
    $(function(){
    $('#${tableId}').on('click','.delBtn',function(e){
user_del(this,'1');
});
})
</script>
#@dialog("myModal")
#@dialogHeader()#end
#@dialogBody()<p>对话框内容…</p>#end
#@dialogFooter()
#@buttonEnsure()确定#end
#@buttonCancel()关闭#end
#end
#end
#end
#end
##tinyTable end
#end
##toggleright end
#end
##togglebox end
#end
##tab end
#end
<script type="text/javascript">
function selectAllNullorReserve(obj,type){
   if(obj!=null&&obj!=""){
    if(document.getElementsByName(obj)!=undefined&&document.getElementsByName(obj).length>0){	//getElementsByName函数的作用按名字查找对象，返回一个数组。
     var userids = document.getElementsByName(obj);
     if(type=="全选"){
      for(var i=0;i<userids.length;i++){
       if(userids[i].checked == false){
        userids[i].checked = true;
       }
      }
     }else if(type=="全不选"){
      for(var i=0;i<userids.length;i++){
       if(userids[i].checked == true){
        userids[i].checked = false;
       }
      }
     }else if(type=="反选"){
      for(var i=0;i<userids.length;i++){
       if(userids[i].checked == true){
        userids[i].checked = false;
       }else{
        userids[i].checked = true;
       }
      }
     }
    }
   }  
}
</script>