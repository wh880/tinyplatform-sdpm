#import("/org/tinygroup/button/components/button_smart.component")
#import("/org/tinygroup/table/components/tinytable.component")

#!set(activeTitle="测试管理",activeMenuId=currentPageId)
#set(testCaseTableId="testCaseTableId")


<script>


        function deleteBeatch() {

            var testList = new Array();
                $("input[type='checkbox']").each(function () {

                    if (this.checked == true && this.id != "checkboxall") {
                        var caseId = $(this).val();
                        
                        testList.push({caseId: caseId});
                        
                    }

                });

                if (testList.length > 0) {
                    $.ajax({
                        type: "POST",
                        url: "${TINY_CONTEXT_PATH +adminPath}/quality/testCase/batchDeleteAjax",
                        data: JSON.stringify(testList),//将对象序列化成JSON字符串
                        dataType: "json",
                        contentType: 'application/json;charset=utf-8', //设置请求头信息
                        success: function (data) {
                            window.location.reload();
                        },
                        error: function (res) {
                            alert("失败");
                        }
                    });
                }
                

            

        }



</script>


#set(name="qualityCases")
#@div()
#@tabWithInit("tab_demo" "optionsBox")
    #@div(divClass="dropdownBox")
        #include("/testManagement/page/dropdownMenu.page")
    #end
    #@tabHead()
        #include("/testManagement/page/Tab.page")
    #end

    #@tabBodyCol("ptop-5")
    ##operationbar start1
        #@div(divClass="operationbar")
        <span class="f">
        		#foreach(m:menuManager.getScopeMenus("testcaseleft-tab"))
        		#set(url=eval(m.href))
    				#if(m.id=="tcasesee")
    					#@buttonGroup()
		                    #@buttonDropdown("more" buttonClass="btnDropDown")分组查看 
		                     	#@spanCaret()#end
		                    #end
		                    #@ulDropdownMenu("downMenuSty")                       
		                         <p>
		                             <a href="${TINY_CONTEXT_PATH+adminPath}/testManagement/page/cases.page">需求分组</a>
		                         </p>	
		                        #@liDivider()#end
		                    #end
		                #end
		             #else
		             #if(m.id == "tcaseserach")
		             	#if(type!="story")
		             		<a href="#" id="showsearchmore">#buttonIcon(iconClass="icon-search")搜索</a>
		             	#end
		             #else
		             	<a href="${TINY_CONTEXT_PATH+adminPath}${url}" class="${m.id==status?'active_btn':''}">${m.name}</a>
		             #end
		             #end
		         #end  				
				</span>
        <span class="r">
				#foreach(m:menuManager.getScopeMenus("testcase-tab"))
    				#if(m.id!="add-case")
    					#@aModal("#myModal" m.name "550" "100" "" m.href "ml-5")
								#buttonIcon(iconClass=m.icon)${m.name}#end
					#else                  
             			<a href="${TINY_CONTEXT_PATH+adminPath}${m.href}">#buttonIcon(iconClass=m.icon)${m.name}</a>
			 		#end
		 		#end
#*					<a href="${TINY_CONTEXT_PATH+adminPath}/testManagement/page/proposecase.page">#buttonIcon(iconClass=
                        "icon-plus")建用例</a>*#
				</span>
            #div(divClass="clearfix")
            #if(type!="story")
            	 #include("/testManagement/page/mulsearchTestCase.page")
            #end
           
        #end
    ##operationbar end
    #end
##tabbody end

#if(type!="noCase")
		#include("/testManagement/page/testCase.page")
	#else
		#include("/testManagement/page/NoTestCaseStory.page")
	#end
##togglebox end
#end

##tab end
#end
<script type="text/javascript">
function selectAllNullorReserve(obj,type){
   if(obj!=null&&obj!=""){
    if(document.getElementsByName(obj)!=undefined&&document.getElementsByName(obj).length>0){	//getElementsByName函数的作用按名字查找对象，返回一个数组。
     var userids = document.getElementsByName(obj);
     if(type=="全选"){
      for(var i=0;i<userids.length;i++){
       if(userids[i].checked == false){
        userids[i].checked = true;
       }
      }
     }else if(type=="全不选"){
      for(var i=0;i<userids.length;i++){
       if(userids[i].checked == true){
        userids[i].checked = false;
       }
      }
     }else if(type=="反选"){
      for(var i=0;i<userids.length;i++){
       if(userids[i].checked == true){
        userids[i].checked = false;
       }else{
        userids[i].checked = true;
       }
      }
     }
    }
   }  
}
</script>