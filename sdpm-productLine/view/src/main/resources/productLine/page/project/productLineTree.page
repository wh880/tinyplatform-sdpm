
#include(/productLine/page/tabledemo/buildlist.page)

#import("/org/tinygroup/table/components/togglebox.component")
#import("/org/tinygroup/compose/components/compose_typography.component")
#import("/org/tinygroup/button/components/button_smart.component")
#set(linkName="line-product")

#@tabBodyCol("ptop-5")
##operationbar start
    #@div(divClass="operationbar")
    <span class="f">
##					<a href="#" class="active_btn">未关闭</a>
    <a val="未关闭" class="selDate ${date==1?"active_btn":""}">未关闭</a>

    <a val="all" class="selDate ${date==2?"active_btn":""}">全部</a>
##					<a href="#">由我创建</a>
##					<a href="#">新建</a>
##					<a href="#">已批准</a>
##					<a href="#">结束</a>
##					<a href="#">取消</a>
##					<a href="#">已关闭</a>
    <a val="user" class="selUser ${date==1?"active_btn":""}">由我创建</a>
    <a val="新建" class="selDate ${date==2?"active_btn":""}">新建</a>
    <a val="已批准" class="selDate ${date==3?"active_btn":""}">已批准</a>
    <a val="结束" class="selDate ${date==4?"active_btn":""}">结束</a>
    <a val="取消" class="selDate ${date==5?"active_btn":""}">取消</a>

    <a val="已关闭" class="selDate ${date==0?"active_btn":""}">已关闭</a>

    <a href="#" id="showsearchmore">#buttonIcon(iconClass="icon-search")搜索</a>
				</span>
    <span class="r">
				<!--导入导出修改-->
        #@aModal("#myModal" "导入" "600" "65" "btn-class"
            "/productLine/page/tabledemo/product-import.pagelet")#buttonIcon(iconClass="icon-download-alt")导入#end

        #@buttonGroup()
            #@buttonDropdown("Dropdown") #buttonIcon(iconClass="icon-upload-alt")导出#end
            #@ulDropdownMenu("downMenuSty")

                #@iconOperations(
                    "#myModal" "" "导出" "500" "254"  "/productLine/page/tabledemo/product-export-data.pagelet" "ml-5")
                    &nbsp;导出数据#end


                #@iconOperations(
                    "#myModal" "" "导出" "700" "80" "/productLine/page/tabledemo/product-export-template.pagelet" "ml-5")
                    &nbsp;导出模板#end

            #end
        #end &nbsp;

        #set(m=menuManager.getMenu("newproduct"))
        #if(m)
            #set(url=eval(m.href))
            <a title="${m.name}" class="ml-5" href="${TINY_CONTEXT_PATH +adminPath}${url}"><i
                    class="${m.icon}">${m.name}</i></a>
        #end
    </span>
        #div(divClass="clearfix")
        #include("/productLine/page/event/mulsearch.page")
    #end
##operationbar end

    #@toggleBox({"class":"open"})##展开为class:OPEN 要附加其它的属性请用MAP带入
        #@toggleLeft({"class":"aclass"})
            #@settoggleLeftTitle()
            产品线
            #end

            #@settoggleLeftBody("treeLeftbox")
                #@zTreeList(call("link",adminPath+"/productLine/treeData"))
                    #setzTreeValMap({"id":"treeId","name":"pName","pid":"pId"}) ##Id中带"p"的为productLine的ID，其余的为productde ID
                    #zTreeSetLinkUrl(TINY_CONTEXT_PATH+adminPath+"/productLine/totree" )
                #end
            #end


        #end


        #@toggleRight()

            #include("/productLine/page/tabledemo/list.page")

        #end
    #end

#end
<script>
    $(function(){
        var actionUrl = $("#productLinetable").attr("data-url");
        $(".selDate").click(function(e){
            $("#productLinetable").attr("data-url", actionUrl + "&productLineStatus=" + $(this).attr("val"));
            $("#productLinetable").trigger("refresh");
        });

        $(".selUser").click(function(e){
            $("#productLinetable").attr("data-url", actionUrl + "&productLineCreatedBy=" + $(this).attr("val"));
            $("#productLinetable").trigger("refresh");
        });
    });
</script>

#include("/productLine/page/event/mytree.page")

