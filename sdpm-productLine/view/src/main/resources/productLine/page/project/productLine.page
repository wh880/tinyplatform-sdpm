#import("/org/tinygroup/table/components/togglebox.component")
#import("/org/tinygroup/compose/components/compose_typography.component")
#import("/org/tinygroup/button/components/button_smart.component")
#set(linkName="line-product")

#@tabBodyCol("ptop-5")
##operationbar start
    #@div(divClass="operationbar")
    <span class="f">
##					<a href="#" class="active_btn">未关闭</a>
					<a val="未关闭" class="selDate ${date==1?"active_btn":""}">未关闭</a>
					
					<a val="all" class="selDate ${date==2?"active_btn":""}">全部</a>
##					<a href="#">由我创建</a>
##					<a href="#">新建</a>
##					<a href="#">已批准</a>
##					<a href="#">结束</a>
##					<a href="#">取消</a>
##					<a href="#">已关闭</a>
					<a val="user" class="selUser ${date==1?"active_btn":""}">由我创建</a>
                    <a val="新建" class="selDate ${date==2?"active_btn":""}">新建</a>
                    <a val="已批准" class="selDate ${date==3?"active_btn":""}">已批准</a>
                    <a val="结束" class="selDate ${date==4?"active_btn":""}">结束</a>
                    <a val="取消" class="selDate ${date==5?"active_btn":""}">取消</a>
                   
                    <a val="已关闭" class="selDate ${date==0?"active_btn":""}">已关闭</a>
					
					<a href="#" id="showsearchmore">#buttonIcon(iconClass="icon-search")搜索</a>
				</span>
    <span class="r">
				<!--导入导出修改-->
        #@aModal("#myModal" "导入" "600" "65" "btn-class"
            "/productLine/page/tabledemo/product-import.pagelet")#buttonIcon(iconClass="icon-download-alt")导入#end

        #@buttonGroup()
            #@buttonDropdown("Dropdown") #buttonIcon(iconClass="icon-upload-alt")导出#end
            #@ulDropdownMenu("downMenuSty")

                #@iconOperations(
                    "#myModal" "" "导出" "500" "254"  "/productLine/page/tabledemo/product-export-data.pagelet" "ml-5")
                    &nbsp;导出数据#end


                #@iconOperations(
                    "#myModal" "" "导出" "700" "80" "/productLine/page/tabledemo/product-export-template.pagelet" "ml-5")
                    &nbsp;导出模板#end

            #end

        #end &nbsp;

        #foreach(m:menuManager.getScopeMenus("product-new"))
            <a title="${m.name}" class="ml-5" href="${TINY_CONTEXT_PATH +adminPath}${m.href}"><i
                    class="${m.icon}">${m.name}</i></a>
        #end

				</span>
        #div(divClass="clearfix")
        #include("/productLine/page/event/mulsearch.page")
    #end
##operationbar end

    #@toggleBox({"class":"open"})##展开为class:OPEN 要附加其它的属性请用MAP带入
        #@toggleLeft({"class":"aclass"})
            #@settoggleLeftTitle()
            产品线
            #end

            #@settoggleLeftBody("treeLeftbox")
            <ul class="treeList">
                <li id="listContent" style="display:none; position:absolute;left:74px;">
                    <ul id="alternative" class="ztree" style="width:126px;min-height:160px;max-height:300px;"></ul>
                </li>
            </ul>
            <ul id="treeDrag" class="ztree"></ul>

            #end


        #end


        #@toggleRight()
        #*		#@tinyTable() ##ID为空则系统自动生成 带入参数则取该参数为ID
                    #@div(divBaseClass="tinyheaderTools form-inline")
                        #setTinyTablePageSize([10,20,50,100,200,35]) ##每页数据条数设置

                        #@aModal("#myModal" "批量编辑" "1200" "500" "btn radius btn-primary" "/productLine/page/tabledemo/product-batchedit.pagelet")批量编辑#end


                    #end
                    #@tinyTableContent("../../data/productdata.pagelet") ##取数据地址 总数据
                        #@thead()
                            #@tr()  ##class 为sorting 表票可排序 为sorting_desc(正序为为sorting_asc) 为当前倒序
                                #@tinyTh({"width":"8"})<input type="checkbox" name="allck" value="">#end
                                #@tinyTh({"class":"sorting","rel":"sortname"})ID#end
                                #@tinyTh({"class":"sorting sorting_desc","rel":"sortname"})产品名称#end
                                #@tinyTh({"class":"","rel":"sortname"})激活需求#end
                                #@tinyTh({"class":"","rel":"sortname"})已变更需求#end
                                #@tinyTh({"class":"","rel":"sortname"})草稿需求#end
                                #@tinyTh({"class":"","rel":"sortname"})已关闭需求#end
                                #@tinyTh({"class":"sorting","rel":"sortname"})计划数#end
                                #@tinyTh({"class":"sorting","rel":"sortname"})发布数#end
                                #@tinyTh({"class":"sorting","rel":"sortname"})相关BUG#end
                                #@tinyTh({"class":"sorting","rel":"sortname"})未解决#end
                                #@tinyTh({"class":"sorting","rel":"sortname"})未指派#end
                                #@tinyTh({"class":"sorting","rel":"sortname"})排序#end
                            #end
                        #end
                    #end
                    ##以下部分为对删除和修改的影响 因为存在不同的信息故放在外面自行更改 #dialog 配合修改使用
                    <script type="text/javascript">
                        $(function(){
                        #@dialog("myModal")
                        #@dialogHeader()对话框标题#end
                        #@dialogBody()<p>对话框内容…</p>#end
                        #@dialogFooter()
                            #@buttonEnsure()确定#end
                            #@buttonCancel()关闭#end
                        #end
                    #end	$('#${tableId}').on('click','.delBtn',function(e){
                                user_del(this,'1');
                            });
                        })
                    </script>

                #end*#
            #include("/productLine/page/tabledemo/list.page")

        #end
    #end

#end
<script>
    $(function(){
        var actionUrl = $("#productLinetable").attr("data-url");
        $(".selDate").click(function(e){
            $("#productLinetable").attr("data-url", actionUrl + "&productLineStatus=" + $(this).attr("val"));
            $("#productLinetable").trigger("refresh");
        });

        $(".selUser").click(function(e){
            $("#productLinetable").attr("data-url", actionUrl + "&productLineCreatedBy=" + $(this).attr("val"));
            $("#productLinetable").trigger("refresh");
        });
    });
</script>

#include("/productLine/page/event/mytree.page")
