#import("/org/tinygroup/button/components/button_common.component")
#import("/org/tinygroup/button/components/button.component")
#include("/productLine/page/event/mytree.page")
#set(linkName="overview")





<div class="infoContent">
    <p class="titleName">产品线编辑</p>

    #@tinyForm("thisform" TINY_CONTEXT_PATH +adminPath+"/productLine/update" "post" )
        #hiddenInput("","productLineId","",productLine?.productLineId)
、
        #@elementItem()
            #@colLabel()<span class="c-red">*</span>产品线名称：#end
            #@formControlDiv("col-4")
                #tinyInput(
                    "text" "productLineName" productLine?.productLineName {"placeholder":"产品线名称","nullmsg":"请输入产品线名称！","datatype":"*1-50","id":
                    "product-name","class":"input-text","ajaxurl":TINY_CONTEXT_PATH+adminPath+
                    "/productLine/judgeProductLineName?productLineId="+productLine?.productLineId})
            #end
            #@validateDiv("col-2")#end
        #end
        #@elementItem()
            #@colLabel()<span class="c-red">*</span>产品线编号：#end
            #@formControlDiv("col-4")
                #tinyInput(
                    "text" "productLineCode" productLine?.productLineCode {"placeholder":"产品编号","nullmsg":"请输入产品编号！","datatype":"n","id":
                    "product-code","class":"input-text","ajaxurl":TINY_CONTEXT_PATH+adminPath+
                    "/productLine/judgeProductLineCode?productLineId="+productLine?.productLineId})
            #end
            #@validateDiv("col-2")#end
        #end

        #@elementItem()
            #@colLabel()<span class="c-red">*</span>产品线经理：#end
            #@formControlDiv("col-4")
                #@Tselect2F()
                    <script>
                        $(function(){
                            ajaxRead("${sid}", "productLineOwner", "orgUserId", "orgUserRealName", "/org/user/userList");
                        })
                    </script>
                    #@Tselect2Body("productLineOwner" productLine?.productLineOwner {"class":"input-text select2","nullmsg":"请选择产品线经理！","datatype":"*"}) ##,"multiple":"multiple"加上为多选项
                    #end

                    #@Tselect2Fix()
                        #set(m=menuManager.getMenu("organizationAddUser"))
                        #if(m)
                            <a href="${TINY_CONTEXT_PATH+adminPath}${m.href}" class="r">增加</a>
                        #end
                        #set(m=menuManager.getMenu("organizationUser"))
                        #if(m)
                            <a href="${TINY_CONTEXT_PATH+adminPath}${m.href}">全部</a>
                        #end
                    #end

                #end
            #end
            #@validateDiv("col-2")#end
        #end
        #@elementItem()
            #@colLabel()<span class="c-red">*</span>产品线质量经理：#end
            #@formControlDiv("col-4")
                #@Tselect2F()
                    <script>
                        $(function(){
                            ajaxRead("${sid}", "productLineQualityManager", "orgUserId", "orgUserRealName", "/org/user/userList");
                        })
                    </script>
                    #@Tselect2Body(
                        "productLineQualityManager" productLine?.productLineQualityManager {"class":"input-text select2","nullmsg":"请选择产品线质量经理！","datatype":"*"}) ##,"multiple":"multiple"加上为多选项

                    #end

                    #@Tselect2Fix()
                        #set(m=menuManager.getMenu("organizationAddUser"))
                        #if(m)
                            <a href="${TINY_CONTEXT_PATH+adminPath}${m.href}" class="r">增加</a>
                        #end
                        #set(m=menuManager.getMenu("organizationUser"))
                        #if(m)
                            <a href="${TINY_CONTEXT_PATH+adminPath}${m.href}">全部</a>
                        #end
                    #end

                #end
            #end
            #@validateDiv("col-2")#end
        #end
        #@elementItem()
            #@colLabel()<span class="c-red">*</span>产品线交付经理：#end
            #@formControlDiv("col-4")
                #@Tselect2F()
                    <script>
                        $(function(){
                            ajaxRead("${sid}", "productLineDeliveryManager", "orgUserId", "orgUserRealName", "/org/user/userList");
                        })
                    </script>
                    #@Tselect2Body(
                        "productLineDeliveryManager" productLine?.productLineDeliveryManager {"class":"input-text select2","nullmsg":"请选择产品线交付经理！","datatype":"*"}) ##,"multiple":"multiple"加上为多选项
                    #end

                    #@Tselect2Fix()
                        #set(m=menuManager.getMenu("organizationAddUser"))
                        #if(m)
                            <a href="${TINY_CONTEXT_PATH+adminPath}${m.href}" class="r">增加</a>
                        #end
                        #set(m=menuManager.getMenu("organizationUser"))
                        #if(m)
                            <a href="${TINY_CONTEXT_PATH+adminPath}${m.href}">全部</a>
                        #end
                    #end

                #end
            #end
            #@validateDiv("col-2")#end
        #end
        #@elementItem()
            #@colLabel()产品线描述：#end
            #@formControlDiv("col-8")
                #@Teditor(
                    "productLineSpec" "productLineSpec" {"initialFrameHeight":"200" ,"placeholder":"说点什么...最少输入10个字符",
                    "datatype":"*10-500"})${productLine?.productLineSpec}#end
            #end
            #@validateDiv("col-2")#end
        #end

        #@elementItem()
            #@colLabel()访问控制：#end
            #@skinMinimal("col-8")

                #@Tradioes("acl" productLine?.acl {"onclick":"setWhite(this.value)"})
                    #foreach(source:getDict("lineAccessControl"))
                        <div>#@Tradio(source?.value)${source?.text}#end</div>
                    #end
                #end

            #end
            #@validateDiv("col-2")#end
        #end
        #@elementItem("whitelistBox" productLine?.acl!=2?'hidden':'')
            #@colLabel()<span class="c-red">*</span>分组白名单#end
            #@skinMinimal("col-8")
                #@Tcheckboxes("productLineWhiteList" productLine?.productLineWhiteList)
                    #foreach(role : UserUtils.getAllRoleList())
                        #@Tcheckbox(role?.orgRoleId)${role?.orgRoleName}#end
                    #end
                #end
            #end
            #@validateDiv("col-2")#end
        #end



        #@elementItem()
            <div class="col-12">
                <div class="col-5">

                </div>
                <div class="col-1">
                    <button style="float: left" type="submit" id="submit" class="commitBtn">保存</button>
                </div>
                <div class="col-1">
                    #@aExtendButton("btn-sm backBtn" "javascript:history.go(-1)")返回#end
                </div>
                <div class="col-5"></div>
            </div>
        #end
    #end
</div>


<script type="text/javascript">
    function setWhite(acl) {
        acl == '2' ? $('#whitelistBox').removeClass('hidden') : $('#whitelistBox').addClass('hidden');
    }
</script>
<script type="text/javascript">
    $(function () {
        $("form[name=thisform").Validform({
            tiptype: 2
        });
    });
</script>
<script type="text/javascript">
    function setWhite(acl) {
        acl == '2' ? $('#whitelistBox').removeClass('hidden') : $('#whitelistBox').addClass('hidden');
    }
</script>

