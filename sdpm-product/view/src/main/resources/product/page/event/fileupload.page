#!set(activeTitle="属性管理",activeMenuId="9.5")
#import("/org/tinygroup/form/components/form.component")
<style>
.attributeList{padding:0 0px;margin-top: -11px}
.treeList .select-box{margin-top:12px;}
.treeList .col-4{ margin-right:8px;}
.treeList li{ margin-bottom:7px;}
.treeList .btn-add{margin-top:10px;margin-left:6px;}
.searchItemBox{min-height:100px;padding:5px; max-height:164px; overflow:auto; border:#ddd 1px solid; clear:both;}
.searchItemBox .col-w1{width:20%; float:left; margin-right:8px;}
.searchItemBox .col-w2{width:77%;margin-right:8px;}
.searchItemBox .col-w3{width:5%;}
.searchItemBox .col-m{ margin:2px 6px 2px 2px; width:56px;text-align:right;}
.searchItemBox .col-btn .btn,.col-btn{padding-right:5px;}
.searchItem{clear:both; padding:2px 1px; height:38px;padding:5px; min-width:538px;}
.searchItemActive{background:#eec;}
.alternativeBox{padding:3px 1px 5px;background-color:#fdfdfd;}
</style>
<script>
$(document).ready(function(){
  $('.searchItemBox').on('click', '.del-btn',function(e){
	  if(confirm("确认删除？")){
		$(this).parent().remove(); 
	  }
	 return false;
  });

  $('.searchItemBox').on('click', '.searchItem', function() {
	$(this).addClass('searchItemActive').siblings().removeClass('searchItemActive');
  });

#*  $("#leftIndentation").on("click",function(){
	var marginleft=parseInt($(".searchItemActive").css("margin-left"))-28;
	if(marginleft<0) marginleft=0;
	$(".searchItemActive").css("margin-left",marginleft+"px");
  });
   $("#rightIndentation").on("click",function(){
	var marginleft=parseInt($(".searchItemActive").css("margin-left"))+28;
	$(".searchItemActive").css("margin-left",marginleft+"px");
  });*#
  $(".searchItemBox").on("click",".icon-arrow-down",function(){
  	  $(this).parents(".searchItem").addClass("searchItemActive");
	  $(".searchItemBox .searchItem").each(function(index){
	   	if($(this).hasClass("searchItemActive")){
			var itemNum=$(".searchItemBox .searchItem").length;
			if (index>=itemNum-1){
				console.log("没位置了");
			}else{
				 $(".searchItemBox .searchItem").eq(index+1).after($(this).clone());
				 $(this).remove();

			}
			return false;
		}
	  })
  });
  $(".searchItemBox").on("click",".icon-arrow-up",function(){
 	  $(this).parents(".searchItem").addClass("searchItemActive");
	  $(".searchItemBox .searchItem").each(function(index){
		if($(this).hasClass("searchItemActive")){
			var itemNum=$(".searchItemBox .searchItem").length;
			if (index==0){
				console.log("没位置了");
			}else{
				$(".searchItemBox .searchItem").eq(index-1).before($(this).clone());
				$(this).remove()
			}
			return false;
		}
	  })
  });
  $(".item-btn-add").on("click",function(){
#*	var selectedItemName=$("select[name=itemBarName]");*#
	var selectedItemRela=$("select[name=itemBarRela]");
	var itempos=$("select[name=itemBarPos]").val();
	console.log(selectedItemRela.val());
#*	if(!selectedItemName.val()) return false;*#
	newDom=$(".itemTemplate .searchItem").eq(0).clone();
#*	newDom.find(".itemName").html(selectedItemName.find("option:selected").text());*#
	newDom.find("select[name=itemRela] option[value="+selectedItemRela.val()+"]").attr('selected', true);
	if($(".searchItemActive").size()){
		if(itempos=="up"){
			$(".searchItemActive").before(newDom);
		}else{
			$(".searchItemActive").after(newDom);
		}
	}else{
		if(itempos=="up"){
			$(".searchItemBox").prepend(newDom);
		}else{
			$(".searchItemBox").append(newDom);
		}
	}

  });
});
</script>

<div class="attributeList">
	<ul class="treeList">
		<li class="alternativeBox">
#*		<div class="col-4">
			#@selectRadiusBox()
			    #@select(selectName="itemBarName",selectId="selectItems")
			        #@optionSelected("")请选择#end
			        #@optionItem("sex")学历#end
			        #@optionItem("joindate")年龄#end
			        #@optionItem("joindate")收入#end
			    #end
			#end
		</div>*#
		<div class="col-3">
			#@selectRadiusBox()
			    #@select(selectName="itemBarPos")
					#@optionItem("down")下方#end
			        #@optionItem("up")上方#end
			    #end
			#end
		</div>
			<input class="btn radius btn-info btn-add item-btn-add" type="button"  value="添加">
	</li>
##	<li class="mobileBtn">
##		
###*		<div class="col-btn" id="leftIndentation">
##			<span class="btn btn-small btn-default">
##				<i class="icon-arrow-left"> 前缩进</i>
##			</span>
##		</div>
##		<div class="col-btn" id="rightIndentation">
##			<span class="btn btn-small btn-default">
##				<i class="icon-arrow-right "> 后缩进</i>
##			</span>
##		</div>*#
##	</li>
	</ul>
	#div(divClass="clearfix")
		<div class="itemTemplate" style="display:none">
			<div class="searchItem">
			
			<div class="col-8">
                 <div class="col-7" style="float:left;">
                 	<input type="file" style="width:100%"/>
                 </div>
				 <div class="col-5" style="float:right;">   
				   <input type="text" class="form-control" placeholder="标题：" tabindex="-1" style="width:100%"/>
			     </div> 
				
			</div>
#*			<div class="col-w2">
				<input type="checkbox" value="1" name="isMust">是否必备
			</div>*#
			<div class="col-btn del-btn">
				<span class="btn btn-small btn-default">
					<i class="icon-remove"> 删除</i>
				</span>
			</div>
			</div>
		</div>
	<div class="searchItemBox">
		<div class="searchItem"  id="list1">

			<div class="col-8">
                 <div class="col-7" style="float:left;">
                 	<input type="file" style="width:100%"/>
                 </div>
				 <div class="col-5" style="float:right;">   
				   <input type="text" class="form-control" placeholder="标题：" tabindex="-1" style="width:100%"/>
			     </div> 
				
			</div>
			
			<div class="col-btn del-btn">
				<span class="btn btn-small btn-default">
					<i class="icon-remove"> 删除</i>
				</span>
			</div>
		</div>
		<div class="searchItem"  id="list2">
			<div class="col-8">
                 <div class="col-7" style="float:left;">
                 	<input type="file" style="width:100%"/>
                 </div>
				 <div class="col-5" style="float:right;">   
				   <input type="text" class="form-control" placeholder="标题：" tabindex="-1" style="width:100%"/>
			     </div> 
				
			</div>
			<div class="col-btn del-btn">
				<span class="btn btn-small btn-default">
					<i class="icon-remove"> 删除</i>
				</span>
			</div>
			<div class="col-btn upBtn">
				<span class="btn btn-small btn-default">
					<i class="icon-arrow-up"> 上移</i>
				</span>
			</div>
			<div class="col-btn downBtn">
				<span class="btn btn-small btn-default">
					<i class="icon-arrow-down"> 下移</i>
				</span>
			</div>
		</div>
	</div>
</div>