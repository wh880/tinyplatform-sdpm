
#!set(linkName="product-archive",sonitem="
<li>"+"文档"+"</li>")

<script >


    $(document).ready(function(){

        ajaxRead("docproduct","productId","productName");
        ajaxRead("docmodule","moduleId","moduleName");
    });

</script>
#import("/org/tinygroup/form/components/form.component")
#import("/org/tinygroup/icon/components/icon.component")
#import("/org/tinygroup/button/components/button_common.component")
#import("/org/tinygroup/button/components/button.component")
#macro radio1(rId rName rChecked rValue rClass rIsDisabled radioOther)
<input#if(rId) id="$!{rId}"#{end}#if(rName) name="$!{rName}"#end#if(rChecked && rChecked=="checked")
               checked#{end}#if(rValue) value="$!{rValue}"#end#if(rClass)
               class="$!{rClass}"#end#if(rIsDisabled && rIsDisabled=="disabled") disabled#end type="radio"
               onclick="${radioOther}"/>
#end
#macro labelRadio1(rId rName rValue rClass radioOther labelText)
    #@radioBox()
        #radio1(rId=rId rName=rName rValue=rValue rClass=rClass radioOthe=radioOther)
        #@label(ckId)${labelText}#end
    #end
#end


#@tinyForm("thisform" TINY_CONTEXT_PATH+"/document/product/save/updateDoc" "post" {"class":"test"})
<div style="width:100%;float:center" class="pageleftpart">
    <div class="infoContent">
        <p class="titleName">创建文档</p>

        #@elementItem()
            #@colLabel()所属产品：#end
            #@tinySelect("docProduct" product?.productId {"style":"width:300px","class":"input-text","rel":"22","url":"/product/productList","ajaxType":"docproduct","data":""})
            #end
        #end

        #@elementItem()
            #@colLabel()所属分类：#end
            #@tinySelect("docModule" "IN" {"style":"width:300px","class":"input-text","rel":"22","url":"/system/module/moduleList","ajaxType":"docmodule","data":""})

            #end
        #end

        #@elementItem()
            #@colLabel()文档类型：#end
            #@skinMinimal("mt-20")
                #labelRadio1(rId="typefile" rName="docType" rValue="文件" labelText="文件" "setType(this.value);")
                #labelRadio1(rId="typeurl" rName="docType" rValue="链接" labelText="链接" "setType(this.value);")
                #labelRadio1(rId="typetext" rName="docType" rValue="网页" labelText="网页" "setType(this.value);")

            #end
            #@validateDiv("col-2")#end
        #end

        #@elementItem()
            #@colLabel()文档标题：#end
            #@formControlDiv("col-8")
                #tinyInput(
                    "text" "docTitle" ""{"style":"width:300px","placeholder":"","datatype":"*4-16","nullmsg":"标题不能为空！","id":"doctitle","class":"input-text"})
            #end
        #end
        #@validateDiv("col-2")#end
        #@elementItem(elementId="contentBox" eleItemClass="hidden")
            #@colLabel()文档正文：#end
            #@formControlDiv("col-6")
                #@Teditor("docContent" "docContent" {"initialFrameHeight":"150" ,"datatype":"*10-300"})#end
            #end
            #@validateDiv("col-2")#end
        #end
        #@elementItem(elementId="urlBox" eleItemClass="hidden")
            #@colLabel()文档URL：#end
            #@formControlDiv("col-8")
                #tinyInput(
                    "text" "docUrl" ""{"style":"width:300px","placeholder":"相应的链接地址","datatype":"*4-16","id":"docurl",
                    "class":"input-text"})
            #end
        #end
        #@validateDiv("col-2")#end
        #@elementItem()
            #@colLabel()关键字：#end
            #@formControlDiv("col-6")
                #tinyInput(
                    "text" "docKeywords" ""{"placeholder":"","datatype":"*4-16","id":"keywords","class":"input-text"})
            #end
        #end
        #@validateDiv("col-2")#end

        #@elementItem()
            #@colLabel()文档摘要：#end
            #@formControlDiv("col-6")
                #@tinyTextarea("docDigest" {"placeholder":"说点什么...最少输入10个字符","datatype":"*10-500","nullmsg":"描述不能为空！"})#end

            #end
            #@validateDiv("col-2")#end
        #end

        #@elementItem(elementId="fileBox" eleItemClass="")
            #@colLabel()附件：#end
            #@formControlDiv("col-8")
                #fileWithInput("file-1")
            #end
            #@validateDiv("col-2")#end
        #end
    </div>
    #@elementItem()
        <div class="col-12">
            <div class="col-2">

            </div>
            <div class="col-1">
                <button style="float: left" type="submit" id="submit" class="commitBtn">保存</button>
            </div>
            <div class="col-1">
                #@aExtendButton("btn-sm backBtn" "javascript:history.go(-1)")返回#end
            </div>
            <div class="col-5"></div>
        </div>
    #end

#end


    <script type="text/javascript">
        /* Set doc type. */
        function setType(type)
        {
            if(type == '链接')
            {
                $('#urlBox').removeClass('hidden');
                $('#fileBox').addClass('hidden');
                $('#contentBox').addClass('hidden');
            }
            else if(type == '网页')
            {
                $('#urlBox').addClass('hidden');
                $('#fileBox').addClass('hidden');
                $('#contentBox').removeClass('hidden');
            }
            else
            {
                $('#urlBox').addClass('hidden');
                $('#fileBox').removeClass('hidden');
                $('#contentBox').addClass('hidden');
            }
        }
    </script>