#import("/org/tinygroup/button/components/button_common.component")
#import("/org/tinygroup/button/components/button.component")

#macro radio1(rId rName rChecked rValue rClass rIsDisabled radioOther)
	<input#if(rId) id="$!{rId}"#{end}#if(rName) name="$!{rName}"#end#if(rChecked && rChecked=="checked") checked#{end}#if(rValue) value="$!{rValue}"#end#if(rClass) class="$!{rClass}"#end#if(rIsDisabled && rIsDisabled=="disabled") disabled#end type="radio" onclick="${radioOther}"/>
#end
#macro labelRadio1(rId rName rValue rClass radioOther labelText)
	#@radioBox()
		#radio1(rId=rId rName=rName rValue=rValue rClass=rClass radioOthe=radioOther)
		#@label(ckId)${labelText}#end
	#end
#end

#@tinyForm("thisform" "url" "post" {"class":""})
	
	#@elementItem()
		#@colLabel()产品名称：#end
		#@formControlDiv("col-3")
			#tinyInput("text" "product-name" ""{"placeholder":"","nullmsg":"请输入产品名称！","id":"product-name","class":"input-text"})
		#end
		#@validateDiv("col-2")#end
	#end
	#@elementItem()
		#@colLabel()产品代号：#end
		#@formControlDiv("col-3")
			#tinyInput("text" "product-id" ""{"placeholder":"","nullmsg":"代号不能为空！","id":"product-id","class":"input-text"})
		#end
		#@validateDiv("col-2")#end
	#end

	
	 #@elementItem()
		#@colLabel()产品负责人：#end
		#@formControlDiv("col-3")
			#@Tselect2F()
                    #@Tselect2Body("lang" "IN" {"class":"input-text select2"}) ##,"multiple":"multiple"加上为多选项
                        <option value="CT">A</option>
                        <option value="DE">B</option>
                        <option value="FL">C</option>
                    #end
                
                    #@Tselect2Fix()<a href="http://www.baidu.com" class="r ">增加</a><a href="#">全部</a>#end
                #end

		#end
		#@validateDiv("col-2")#end
	#end
	
	
	#@elementItem()
		#@colLabel()测试负责人：#end
		#@formControlDiv("col-3")
			#@Tselect2F()
                    #@Tselect2Body("lang" "IN" {"class":"input-text select2"}) ##,"multiple":"multiple"加上为多选项
                        <option value="CT">甲</option>
                        <option value="DE">乙</option>
                        <option value="FL">丙</option>
                    #end
                
                    #@Tselect2Fix()<a href="http://www.baidu.com" class="r ">增加</a><a href="#">全部</a>#end
                #end

		#end
		#@validateDiv("col-2")#end
	#end
	#@elementItem()
		#@colLabel()发布负责人：#end
		#@formControlDiv("col-3")
			#@Tselect2F()
                    #@Tselect2Body("lang" "IN" {"class":"input-text select2"}) ##,"multiple":"multiple"加上为多选项
                        <option value="CT">项目经理</option>
                        <option value="DE">产品经理</option>
                        <option value="FL">开发主管</option>
                    #end
                
                    #@Tselect2Fix()<a href="http://www.baidu.com" class="r ">增加</a><a href="#">全部</a>#end
                #end

		#end
		#@validateDiv("col-2")#end
	#end
	#@elementItem()
		#@colLabel()产品描述：#end
		#@formControlDiv("col-8")
			#@Teditor("content1" "content1" {"initialFrameHeight":"200" ,"placeholder":"说点什么...最少输入10个字符","datatype":"*10-500"})描述一下产品的相关信息...#end
		#end
		#@validateDiv("col-2")#end
	#end
	
	#@elementItem()
        #@colLabel()访问控制：#end
        #@skinMinimal("col-8")
    				#labelRadio1(rId="aclopen" rName="acl" rValue="open" labelText="默认设置(有项目视图权限，即可访问)" "setWhite(this.value);")</br>
    				#labelRadio1(rId="aclcustom" rName="acl" rValue="custom1" labelText="私有项目(只有项目团队成员才能访问)" "setWhite(this.value);")</br>   								
    				#labelRadio1(rId="aclcustom" rName="acl" rValue="custom" labelText="自定义白名单(团队成员和白名单的成员可以访问)" "setWhite(this.value);")</br>
					
			#end
        #@validateDiv("col-2")#end
    #end
    #@elementItem(elementId="whitelistBox" eleItemClass="hidden hidden_namesty")
        	#@colLabel("label_title")分组白名单#end
			#@skinMinimal()
				#labelCheckbox(ckId="whitelistBox" labelText="管理员")
				#labelCheckbox(ckId="whitelistBox" labelText="研发")
				#labelCheckbox(ckId="whitelistBox" labelText="测试")
				#labelCheckbox(ckId="whitelistBox" labelText="项目经理")
				#labelCheckbox(ckId="whitelistBox" labelText="产品经理")
				#labelCheckbox(ckId="whitelistBox" labelText="研发主管")
				#labelCheckbox(ckId="whitelistBox" labelText="产品主管")
				#labelCheckbox(ckId="whitelistBox" labelText="测试主管")				
			#end
        #@validateDiv("col-2")#end
      #end
#end



<script type="text/javascript">
function setWhite(acl)
{
    acl == 'custom' ? $('#whitelistBox').removeClass('hidden') : $('#whitelistBox').addClass('hidden');
}
</script>
<script type="text/javascript">
$(function(){
  $("form[name=thisform").attr("action",'#link("/Validform_post.html")');
  $("form[name=thisform").Validform({
	tiptype:2,
	usePlugin:{
		  //datepicker:{},//日期控件校验;
		  passwordstrength:{
			 minLen:6,//设置密码长度最小值，默认为0;
			 maxLen:18,//设置密码长度最大值，默认为30;
			 trigger:function(obj,error){
				//该表单元素的keyup和blur事件会触发该函数的执行;
				//obj:当前表单元素jquery对象;
				//error:所设密码是否符合验证要求，验证不能通过error为true，验证通过则为false;
				//console.log(error);
				if(error){
				 obj.parent().find(".Validform_checktip").show();
				 obj.parent().find(".passwordStrength").hide();
				}else{
				 obj.parent().find(".passwordStrength").show();
				}
			 }
		  }
	},
	ajaxPost:true,
	beforeCheck:function(curform){
		//在表单提交执行验证之前执行的函数，curform参数是当前表单对象。
		//这里明确return false的话将不会继续执行验证操作;
	},
	beforeSubmit:function(curform){
		//在验证成功后，表单提交前执行的函数，curform参数是当前表单对象。
		//这里明确return false的话表单将不会提交;
	},
	callback:function(data){
		if(data.status=="y"){
			setTimeout(function(){
				$.Hidemsg(); //公用方法关闭信息提示框;显示方法是$.Showmsg("message goes here.");
			},2000);
		}
		//返回数据data是json对象，{"info":"demo info","status":"y"}
		//info: 输出提示信息;
		//status: 返回提交数据的状态,是否提交成功。如可以用"y"表示提交成功，"n"表示提交失败，在Validform_post.html文件返回数据里自定字符，主要用在callback函数里根据该值执行相应的回调操作;
		//你也可以在Validform_post.html文件返回更多信息在这里获取，进行相应操作；
		//ajax遇到服务端错误时也会执行回调，这时的data是{ status:**, statusText:**, readyState:**, responseText:** }；

		//这里执行回调操作;
		//注意：如果不是ajax方式提交表单，传入callback，这时data参数是当前表单对象，回调函数会在表单验证全部通过后执行，然后判断是否提交表单，如果callback里明确return false，则表单不会提交，如果return true或没有return，则会提交表单。
	}
 });
});
</script>