#*
#!set(linkName="product-demand",sonitem="<li>"+"需求"+"</li>")
*#

<script>


    $(document).ready(function () {

        ajaxRead("orguser", "orgUserId", "orgUserAccount");

    #*		$("select[ajaxType='orguser']").each(function(){

                var sele = $(this);

                $.ajax({
                    type: "POST",
                    url: "${TINY_CONTEXT_PATH +adminPath}"+$(this).attr('url'),
                       data: $(this).attr('data'),
                       dataType:"json",
                       contentType : 'application/json;charset=utf-8', //设置请求头信息
                    success: function(data){
                        for(var i=0;i<data.length;data){
                            var em = "<option value='"+data[i].orgUserId+"'>"+ data[i].orgUserAccount +"</option>";
                            sele.append(em);
                            ++i;
                        }

                    },
                    error: function(res){
                        alert("失败");
                    }
                });


            });*#

    });

</script>

#import("/org/tinygroup/button/components/button_common.component")
#import("/org/tinygroup/button/components/button.component")

#@tinyForm("thisform" TINY_CONTEXT_PATH +adminPath+"/product/save" "post" {"class":""})
<div style="width:100%;float:center" class="pageleftpart">
    <div class="infoContent">
        <p class="titleName">添加产品</p>


        #@elementItem()
            #@colLabel()产品名称：#end
            #@formControlDiv("col-3")
                #tinyInput(
                    "text" "productCode" ""{"placeholder":"请输入产品名称","datatype":"*","nullmsg":"产品名称不能为空！","id":
                    "productCode","class":"input-text"})
            #end
            #@validateDiv("col-2")#end
        #end


        #@elementItem()
            #@colLabel()产品代号：#end
            #@formControlDiv("col-3")
                #tinyInput(
                    "text" "productCode" ""{"placeholder":"请输入产品代号","datatype":"*","nullmsg":"代号不能为空！","id":
                    "productCode","class":"input-text"})
            #end
            #@validateDiv("col-2")#end
        #end


        #@elementItem()
            #@colLabel()产品负责人：#end
            #@formControlDiv("col-3")
                #@Tselect2F()
                    #@Tselect2Body("productOwner" "IN" {"class":"input-text select2"}) ##,"multiple":"multiple"加上为多选项
                    #end

                    <script>

                        ajaxRead("${sid}", "productOwner", "orgUserId", "orgUserRealName", "/org/user/userList");

                    </script>

                    #@Tselect2Fix()
                        <a href="${TINY_CONTEXT_PATH}/a/org/user/form">增加</a>
                        <a href="${TINY_CONTEXT_PATH}/a/org/user/list" class="r">全部</a>
                    #end


                #end

            #end
            #@validateDiv("col-2")#end
        #end


        #@elementItem()
            #@colLabel()测试负责人：#end
            #@formControlDiv("col-3")
                #@Tselect2F()
                    #@Tselect2Body(
                        "productQualityManager" "IN" {"class":"input-text select2","url":"/org/user/userList",
                        "ajaxType":"orguser","data":""}) ##,"multiple":"multiple"加上为多选项

                    #end

                    <script>

                        ajaxRead("${sid}", "productQualityManager", "orgUserId", "orgUserRealName", "/org/user/userList");

                    </script>

                    #@Tselect2Fix()
                        <a href="${TINY_CONTEXT_PATH}/a/org/user/form">增加</a>
                        <a href="${TINY_CONTEXT_PATH}/a/org/user/list" class="r">全部</a>
                    #end


                #end

            #end
            #@validateDiv("col-2")#end
        #end
        #@elementItem()
            #@colLabel()发布负责人：#end
            #@formControlDiv("col-3")
                #@Tselect2F()
                    #@Tselect2Body(
                        "productDeliveryManager" "IN" {"class":"input-text select2 ","url":"/org/user/userList",
                        "ajaxType":"orguser","data":""}) ##,"multiple":"multiple"加上为多选项

                    #end

                    <script>

                        ajaxRead("${sid}", "productDeliveryManager", "orgUserId", "orgUserRealName", "/org/user/userList");

                    </script>

                    #@Tselect2Fix()
                        <a href="${TINY_CONTEXT_PATH}/a/org/user/form">增加</a>
                        <a href="${TINY_CONTEXT_PATH}/a/org/user/list" class="r">全部</a>
                    #end

                #end

            #end
            #@validateDiv("col-2")#end
        #end
        #@elementItem()
            #@colLabel()产品描述：#end
            #@formControlDiv("col-8")
                #@Teditor("productDesc" "productDesc" {"initialFrameHeight":"200" ,"placeholder":"说点什么...最少输入10个字符",
                    "datatype":
                    "*10-500"})描述一下产品的相关信息...#end
            #end
            #@validateDiv("col-2")#end
        #end

        #@elementItem()
            #@colLabel()访问控制：#end
            #@skinMinimal("col-8")

                #@Tradioes("acl" "0" {"onclick":"setWhite(this.value)"})
                    <div>#@Tradio("0") 默认设置(有项目视图权限，即可访问)#end</div>
                    <div>#@Tradio("2") 私有项目(只有项目团队成员才能访问)#end</div>
                    <div>#@Tradio("1") 自定义白名单(团队成员和白名单的成员可以访问)#end</div>
                #end
            #end
            #@validateDiv("col-2")#end
        #end
        #@elementItem(elementId="whitelistBox" eleItemClass="hidden")
            #@colLabel()分组白名单：#end
            #@skinMinimal("col-8")
                #@Tcheckboxes("productWhiteList" "")
                    #@Tcheckbox("admin")管理员#end
                    #@Tcheckbox("develop")研发#end
                    #@Tcheckbox("test")测试#end
                    #@Tcheckbox("projectManager")项目经理#end
                    #@Tcheckbox("productManager")产品经理#end
                    #@Tcheckbox("developSupervisor")研发主管#end
                    #@Tcheckbox("productSupervisor")产品主管#end
                    #@Tcheckbox("testSupervisor")测试主管#end
                #end

            #end
            #@validateDiv("col-2")#end
        #end
    </div>
    #@elementItem()
        <div class="col-12">
            <div class="col-5">

            </div>
            <div class="col-1">
                <button style="float: left" type="submit" id="submit" class="commitBtn">保存</button>
            </div>
            <div class="col-1">
                #@aExtendButton("btn-sm backBtn" "javascript:history.go(-1)")返回#end
            </div>
            <div class="col-5"></div>
        </div>
    #end
#end



    <script type="text/javascript">
        function setWhite(acl) {
            acl == '1' ? $('#whitelistBox').removeClass('hidden') : $('#whitelistBox').addClass('hidden');
        }
    </script>


    <script type="text/javascript">
        $(function () {
            $("form[name=thisform").Validform({
                tiptype: 2
            });
        });
    </script>