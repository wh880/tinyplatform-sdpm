#import("/org/tinygroup/button/components/button_smart.component")
#!set(activeTitle="产品管理",activeMenuId=currentPageId)
#include("/product/page/event/common.page")

<style>
    .btn-group #Dropdown {
        background: none;
        border: none;
        padding: 0 3px;
    }

    .open #downMenuSty {
        min-width: 75px
    }
</style>

#@div()
    #@tabWithInit("tab_demo" "tabLayout")
        #@div(divClass="dropdownBox")
            #include("/product/page/project/dropdownMenu.page")
        #end
        #@tabHead()
            #@tabHeadCol()需求#end
            #@tabHeadCol()动态#end
            #@tabHeadCol()计划#end
            #@tabHeadCol()发布#end
            #@tabHeadCol()路线图#end
            #@tabHeadCol()文档#end
            #@tabHeadCol()项目#end
            #@tabHeadCol()模块#end
            #@tabHeadCol()概况#end
        #end
    <span class="r" style="position:relative;top:-30px;height:0;color:#337ab7;font-family:"Microsoft Yahei";">

        #foreach(m:menuManger?.getScopeMenus("product-menu"))
            #set(url=eval(m?.href))
            #if(m?.id="allproduct")
                <a href="${TINY_CONTEXT_PATH +adminPath}${url}">#buttonIcon(iconClass="${m.icon}")${m.name}</a>&nbsp;
            #elseif(m?.id="newproduct")
                #@aModal("#myModal" m.name "900" "500" "btn-class" url )#buttonIcon(iconClass="${m.icon}")${m.name} #end
            #end
        #end

		</span>


        #@tabBodyCol("ptop-5")
        ##operationbar start
            #@div(divClass="operationbar")
            <span class="f">
					<a href="#" class="active_btn">未关闭</a>
					<a href="#">全部需求</a>
					<a href="#">指派给我</a>
					<a href="#">由我创建</a>
					<a href="#">由我评审</a>
					<a href="#">由我关闭</a>
					<a href="#">草稿</a>
					<a href="#">激活</a>
					<a href="#">已变更</a>
					<a href="#">待关闭</a>
					<a href="#">已关闭</a>
					<a href="#">#buttonIcon(iconClass="icon-search")搜索</a>
				</span>
            <span class="r">
				<!--导入导出修改-->
                #@aModal("#myModal" "导入" "700" "130" "btn-class"
                    "/product/page/tabledemo/product-import.pagelet")#buttonIcon(iconClass="icon-upload-alt")导入#end

                #@buttonGroup()
                    #@buttonDropdown("Dropdown") #buttonIcon(iconClass="icon-download-alt")导出  #@spanCaret()#end#end
                    #@ulDropdownMenu("downMenuSty")
                        <p>
                            #@iconOperations(
                                "#myModal" "" "导出" "500" "200"  "/product/page/tabledemo/product-export-data.pagelet"
                                "ml-5") &nbsp;导出数据#end
                        </p>

                        #@iconOperations(
                            "#myModal" "" "导出" "700" "80" "/product/page/tabledemo/product-export-template.pagelet"
                            "ml-5") &nbsp;导出模板#end
                    #end
                #end &nbsp;

					<a href="${TINY_CONTEXT_PATH +adminPath}/product/page/tabledemo/product-report.page">#buttonIcon(iconClass=
                        "icon-bar-chart")报表</a>&nbsp;
                #@iconOperations("#myModal" "icon-plus-sign" "批量添加" "1300" "500"
                    "/product/page/tabledemo/product-demand-addlist.pagelet" "ml-5")&nbsp;批量添加#end

                #@iconOperations(
                    "#myModal" "icon-plus" "提需求" "1000" "400" "/product/story/addstory"
                    "ml-5")&nbsp;提需求#end
				</span>
                #div(divClass="clearfix")
            #end
        ##operationbar end
            #include("/product/page/project/togglebox.page")
        #end

    ##这里是动态的模块布局
        #@tabBodyCol("ptop-5")
        ##operationbar start1
            #@div(divClass="operationbar")
            <span class="f">
					<a href="#" class="active_btn">今天</a>
					<a href="#">昨天</a>
					<a href="#">前天</a>
					<a href="#">本周</a>
					<a href="#">上周</a>
					<a href="#">本月</a>
					<a href="#">上月</a>
					<a href="#">所有</a>
					<span style="left:297px;top:-35px; position:relative">
                        #@tinyForm("thisform" "" "" {"class":"test"})
                            #@elementItem()
                                #@formControlDiv("col-2")
                                    #@tinySelect("lang" "zh" {"class":"input-text select2","rel":"22"})
                                        #@tinyOptionItem("zh")上周#end
                                        #@tinyOptionItem("en")上月#end
                                        #@tinyOptionItem("ta")去年#end
                                    #end
                                #end
                                #@validateDiv("col-2")#end
                            #end
                        #end
					</span>					
				</span>
                #div(divClass="clearfix")
            #end
        ##operationbar end
            #include("/product/page/project/dymanicdata.page")
        #end

        #@tabBodyCol("ptop-5")
        ##operationbar start2
            #@div(divClass="operationbar")
            <span class="f">
					<span class="active_btn">浏览计划</span>
				</span>
            <span class="r">
                #@iconOperations(
                    "#myModal" "icon-plus" "创建计划" "1000" "400" "/product/page/tabledemo/product-addplan.pagelet" "ml-5")
                    &nbsp;创建计划#end
				</span>
                #div(divClass="clearfix")
            #end
        ##operationbar end
            #include("/product/page/project/product-plan.page")
        #end

        #@tabBodyCol("ptop-5")
        ##operationbar start3
            #@div(divClass="operationbar")
            <span class="f">
					<span class="active_btn">浏览发布</span>
				</span>
            <span class="r">
                #@iconOperations(
                    "#myModal" "icon-plus" "创建发布" "1000" "400" "/product/page/tabledemo/product-addrelease.pagelet"
                    "ml-5")&nbsp;创建发布#end
				</span>
                #div(divClass="clearfix")
            #end
        ##operationbar end
            #include("/product/page/project/product-release.page")
        #end
        #@tabBodyCol("ptop-5")
        ##operationbar start4
            #@div(divClass="operationbar")
            <span class="f">
					<span class="active_btn">线路图</span>
				</span>
                #div(divClass="clearfix")
            #end
        ##operationbar end
            #include("/product/page/project/product-roadmap.page")
        #end

        #@tabBodyCol("ptop-5")
        ##operationbar start5
            #@div(divClass="operationbar")
            <span class="f">
					<span class="active_btn">文档列表</span>
				</span>
            <span class="r">
                #@iconOperations(
                    "#myModal" "icon-plus" "创建文档" "1000" "400" "/product/page/tabledemo/product-adddocument.pagelet"
                    "ml-5")&nbsp;创建文档#end
				</span>
                #div(divClass="clearfix")
            #end
        ##operationbar end
            #include("/product/page/project/archive-list.page")
        #end

        #@tabBodyCol("ptop-5")
        ##operationbar start6
            #@div(divClass="operationbar")
            <span class="f">
					<span class="active_btn">项目列表</span>
				</span>
                #div(divClass="clearfix")
            #end
        ##operationbar end
            #include("/product/page/project/product-project-list.page")
        #end
        #@tabBodyCol("ptop-5")
        ##operationbar start7
            #@div(divClass="operationbar")
            <span class="f">
					<span class="active_btn">模块维护</span>
				</span>
                #div(divClass="clearfix")
            #end
        ##operationbar end
            #include("/product/page/project/datatableDemo.page")
        #end

        #@tabBodyCol("ptop-5")
        ##operationbar start8
            #@div(divClass="operationbar")

            <span class="f">
					<span class="active_btn">概况</span>
				</span>

            <span class="r">
			<!--修改了关闭、编辑和返回的跳转-->
                #@aModal("#myModal" "关闭" "700" "130" "btn-class"
                    "/product/page/tabledemo/user-guanbi.pagelet")#buttonIcon(iconClass="icon-off")关闭#end
			<a title="编辑" class="ml-5"
               href="${TINY_CONTEXT_PATH +adminPath}/product/page/tabledemo/tetails.page">#buttonIcon(iconClass=
                "icon-plus")编辑</a>
			<a href="${TINY_CONTEXT_PATH +adminPath}/product/page/project/product.page"
               title="返回">#buttonIcon(iconClass=
                "icon-reply")</a>
				</span>

                #div(divClass="clearfix")
            #end
        ##operationbar end
            #include("/product/page/project/overview.page")
        #end

    #end
#end
<script type="text/javascript">
    $(function () {
        var timeid;
        $(".tabOption").find("li").each(function (index) {
            var sTab = $(this);
            sTab.mouseenter(function () {
                timeid = setTimeout(function () {
                    sTab.addClass("tabCurrent").siblings().removeClass("tabCurrent");
                    sTab.parent().siblings().find("ul:eq(" + index + ")").show().siblings().hide();
                }, 300);
            }).mouseleave(function () {
                clearTimeout(timeid);
            })
        })
    })
</script>
