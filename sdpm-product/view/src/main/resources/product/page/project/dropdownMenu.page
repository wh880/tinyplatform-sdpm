#import("/org/tinygroup/publicComponent/macro/navselect.component")

#@navSelect2("product" "product")
	#@navSelect2Nav()
		#if(productList&&!pltype)
			#for(product : productList)
				#if(product?.productId == sessionProductId)
					${product?.productName}
				#end
			#end
		#else
			产品
		#end
	
	<span class="caret"></span>#end
	#@navSelect2Body()
		  #@navSelect2Data()
		  <option value=""></option>
		  <optgroup label="产品">
			  #for(product : productList)
			  	<option value="${product?.productId}">${product?.productName}</option>
			  #end
		  </optgroup>

		#end
		#@navSelect2Fix()

        <a href="${TINY_CONTEXT_PATH +adminPath}/product/page/tabledemo/product-listall.page" class="r">所有产品</a>&nbsp;
			<!--新增产品-->
        <a href="${TINY_CONTEXT_PATH +adminPath}/product/page/tabledemo/addProduct.page">添加产品</a>&nbsp;
			
		
		#end
	#end

#hiddenInput("productIdHidden","productId","","")

	<script type="text/javascript">
		
		$(function(){
			$("#product-select").on("change",function(){
				var dateValue = $("#product-select").val();
                $.post("${TINY_CONTEXT_PATH +adminPath}/product/sessionset", {productId: dateValue}, function (result) {
					if(true==result){
						 window.location.reload();
					}else{
						alert("产品ID值为空");
					}
				
				});
	##				$("#productIdHidden").val($(this).val());
	##				$(".switchClass").each(function(){
	##					var hrefnew = this.href + "&productId=" + $("#productIdHidden").val();
	##					this.href = hrefnew;
	##				});
			##				window.location.href='${TINY_CONTEXT_PATH +adminPath}/product/story?currentPageId=3&productId='+$(this).find("option:selected").val();
			});
		});
	
	</script>
#end

