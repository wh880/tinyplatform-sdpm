#import("/org/tinygroup/table/components/togglebox.component")
#import("/org/tinygroup/compose/components/compose_typography.component")
#import("/common/component/linkage.component")
#set(storyTableId = "storyTableId" )
#!set(activeTitle="ToggleBox",activeMenuId=currentPageId)
#!set(linkName="product-demand",sonitem="
<li>"+"需求"+"</li>")


#macro liDropdownMenu(rName)
<li class="dropdown-submenu">
    <a tabindex="-1" data-toggle="tab">${rName}</a>
    #bodyContent
</li>
#end



#import("/org/tinygroup/button/components/button_smart.component")

#@tabBodyCol("ptop-5")
##operationbar start
#@div(divClass="operationbar")
#*<span class="f">
					<a href="${TINY_CONTEXT_PATH}/product/story?${tinyRequestQueryString}&choose=1" class="${choose == 1?active_btn:''}">未关闭</a>
					<a href="${TINY_CONTEXT_PATH}/product/story?${tinyRequestQueryString}&choose=2" class="${choose == 2?active_btn:''}">全部需求</a>
					<a href="${TINY_CONTEXT_PATH}/product/story?${tinyRequestQueryString}&choose=3&storyAssignedTo=${user.user_id}" class="${choose == 3?active_btn:''}">指派给我</a>
					<a href="${TINY_CONTEXT_PATH}/product/story?${tinyRequestQueryString}&choose=4&storyOpenedBy=${user.user_id}" class="${choose == 4?active_btn:''}">由我创建</a>
					<a href="${TINY_CONTEXT_PATH}/product/story?${tinyRequestQueryString}&choose=5&storyReviewedBy=${user.user_id}" class="${choose == 5?active_btn:''}">由我评审</a>
					<a href="${TINY_CONTEXT_PATH}/product/story?${tinyRequestQueryString}&choose=6&storyClosedBy=${user.user_id}" class="${choose == 6?active_btn:''}">由我关闭</a>
					<a href="${TINY_CONTEXT_PATH}/product/story?${tinyRequestQueryString}&choose=7&storyStatus=Draft" class="${choose == 7?active_btn:''}">草稿</a>
					<a href="${TINY_CONTEXT_PATH}/product/story?${tinyRequestQueryString}&choose=8&storyStatus=Active" class="${choose == 8?active_btn:''}">激活</a>
					<a href="${TINY_CONTEXT_PATH}/product/story?${tinyRequestQueryString}&choose=9&storyStatus=changed" class="${choose == 9?active_btn:''}">已变更</a>
					<a href="${TINY_CONTEXT_PATH}/product/story?${tinyRequestQueryString}&choose=10&storyStage=Acceptance" class="${choose == 10?active_btn:''}">待关闭</a>
					<a href="${TINY_CONTEXT_PATH}/product/story?${tinyRequestQueryString}&choose=11&storyStatus=closed" class="${choose == 11?active_btn:''}">已关闭</a>
					<a href="#" id="showsearchmore">#buttonIcon(iconClass="icon-search")搜索</a>
				</span>*#


<span class="r">
        #foreach(m:menuManager.getScopeMenus("product-io"))
            #if(m.id=="product-demand-input")
                #@aModal("#myModal" "导入" "600" "65" "btn-class"
                    "/product/page/tabledemo/product-import.pagelet")#buttonIcon(iconClass="icon-download-alt")导入#end

            #else

                #if(m.id=="product-demand-output")
                    #@buttonGroup()
                        #@buttonDropdown("Dropdown") #buttonIcon(iconClass="icon-upload-alt")导出  #@spanCaret()#end#end
                        #@ulDropdownMenu("downMenuSty")
                            <p>#@iconOperations(
                                "#myModal" "" "导出" "400" "254"  "/product/page/tabledemo/product-export-data.pagelet"
                                "ml-5")
                                &nbsp;导出数据#end</p>

                            #@iconOperations(
                                "#myModal" "" "导出" "700" "64" "/product/page/tabledemo/product-export-template.pagelet"
                                "ml-5")
                                &nbsp;导出模板#end

                        #end
                    #end
                #else
                    <a class="ml-5" href="${TINY_CONTEXT_PATH}${m.href}"><i
                            class="${m.icon}">&nbsp;${m.name}</i></a>
                #end
            #end
        #end
    </span>



#div(divClass="clearfix")
#include("/product/page/event/mulsearch.page")
#end
##operationbar end

#@toggleBox({"class":"open"})##展开为class:OPEN 要附加其它的属性请用MAP带入
#@toggleLeft({"class":"aclass"})
#@settoggleLeftTitle()
产品需求
#end

#@settoggleLeftBody("treeLeftbox")
<ul class="treeList">
    <li id="listContent" style="display:none; position:absolute;left:74px;">
        <ul id="alternative" class="ztree" style="width:126px;min-height:160px;max-height:300px;"></ul>
    </li>
</ul>
<ul id="treeDrag" class="ztree"></ul>
#end


#end



#@toggleRight()
#@tinyTable(storyTableId) ##ID为空则系统自动生成 带入参数则取该参数为ID
#@div(divBaseClass="tinyheaderTools form-inline")
#setTinyTablePageSize([10,20,50,100,200,35]) ##每页数据条数设置
<input type="button" value="全选" class="btn btn-default btn-primary "
       onclick="selectAllNullorReserve('product-demand','全选');"/>
<input type="button" value="反选" class="btn btn-default btn-primary"
       onclick="selectAllNullorReserve('product-demand','反选');"/>


#foreach(m:menuManager.getScopeMenus("product-oper"))
#if(m.id=="product-demand-operation")
#@buttonGroup()

#@dropdownItempatent("dropdownSm" "btn-primary" "操作" "#")

#@ulDropdownMenu(dropdownMenuClass="multi-level")
#@dropdownsLi("dropdown-submenu")
#@dropdownA(""　"javascript:void(0);")指派给#end
#@dropdownsUl("dropdown-menu")
#@dropdownItem("javascript:void(0);")admin#end
#@dropdownItem("javascript:void(0);")张三#end
#@dropdownItem("javascript:void(0);")lisi#end
#end
#end

#@dropdownsLi("dropdown-submenu")
#@dropdownA(""　"javascript:void(0);")阶段#end
#@dropdownsUl("dropdown-menu")
#@dropdownItem("javascript:void(0);")空#end
#@dropdownItem("javascript:void(0);")未开始#end
#@dropdownItem("javascript:void(0);")已计划#end
#@dropdownItem("javascript:void(0);")已立项#end
#@dropdownItem("javascript:void(0);")研发中#end
#@dropdownItem("javascript:void(0);")完毕#end
#@dropdownItem("javascript:void(0);")测试中#end
#@dropdownItem("javascript:void(0);")测试完毕#end
#@dropdownItem("javascript:void(0);")已验收#end
#@dropdownItem("javascript:void(0);")已发布#end
#end
#end

#@dropdownsLi("dropdown-submenu")
#@dropdownA(""　"javascript:void(0);")计划#end
#@dropdownsUl("dropdown-menu")
#@dropdownItem("javascript:void(0);")空#end
#@dropdownItem("javascript:void(0);")计划1#end
#@dropdownItem("javascript:void(0);")计划2#end
#end
#end

#@dropdownsLi("dropdown-submenu")
#@dropdownA(""　"javascript:void(0);")评审#end
#@dropdownsUl("dropdown-menu")
#@dropdownItem("javascript:void(0);")确认通过#end
#@dropdownItem("javascript:void(0);")有待明确#end
#*		                		#@liDivider()<hr/>#end*#
#@dropdownsLi("dropdown-submenu")
#@dropdownA(""　"javascript:void(0);")拒绝#end
#@dropdownsUl("dropdown-menu")
#@dropdownItem("javascript:void(0);")已完成#end
#@dropdownItem("javascript:void(0);")延期#end
#@dropdownItem("javascript:void(0);")不做#end
#@dropdownItem("javascript:void(0);")已取消#end
#@dropdownItem("javascript:void(0);")计划如此#end
#end
#end
#end
#end
#end
#end
#end
#end
#end





#foreach(m:menuManager.getScopeMenus("product-del"))
#if(m.id=="product-demand-del")
#@aModal("#myModal" "关闭" "1000" "500" "btn radius btn-danger"
"/product/page/tabledemo/product-demand-del.pagelet")批量关闭#end
#end
#end
#end
#@tinyTableContent(TINY_CONTEXT_PATH+"/product/story/search?"+tinyRequestQueryString) ##取数据地址 总数据
#@thead()
#@tr()  ##class 为sorting 表票可排序 为sorting_desc(正序为为sorting_asc) 为当前倒序
#@tinyTh({"width":"6"})<input type="checkbox" value="">#end
#@tinyTh({"class":"sorting sorting_desc","rel":"story_id"})ID#end
#@tinyTh({"class":"sorting","rel":"story_pri"})P#end
#@tinyTh({"class":"sorting","rel":"story_title"})需求名称#end
#@tinyTh({"class":"sorting","rel":"plan_id"})计划#end
#@tinyTh({"class":"sorting","rel":"story_source"})来源#end
#@tinyTh({"class":"sorting","rel":"story_opened_by"})创建#end
#@tinyTh({"class":"sorting","rel":"story_assigned_to"})指派#end
#@tinyTh({"class":"sorting","rel":"story_estimate"})预计#end
#@tinyTh({"class":"sorting","rel":"story_status"})状态#end
#@tinyTh({"class":"sorting","rel":"story_stage"})阶段#end
#@tinyTh({"class":"","rel":"sortname"})操作#end
#end
#end
#end
##以下部分为对删除和修改的影响 因为存在不同的信息故放在外面自行更改 #dialog 配合修改使用
#@dialog("myModal")
#@dialogHeader()对话框标题#end
#@dialogBody()< p> 对话框内容…</p>#end
#@dialogFooter()
#@buttonEnsure()确定#end
#@buttonCancel()关闭#end
#end
#end
<script type="text/javascript">
    $(function () {
        $('#${tableId}').on('click', '.delBtn', function (e) {
            user_del(this, '1');
        });
    })
</script>

#end
#end
#end

#end


#include("/product/page/event/mytree.page")




