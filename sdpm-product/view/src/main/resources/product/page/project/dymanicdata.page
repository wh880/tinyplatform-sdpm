#include("/product/page/event/common.page")
#set(addArchivePagePath=
    "/product/page/tabledemo/addArchive.pagelet",editpageModalId="myModal",editpageModal="#"+editpageModalId)
#!set(linkName="product-dynamic",sonitem="
<li>"+"动态"+"</li>")


#@tabBodyCol("ptop-5")
##operationbar start1
<div class="operationbar" style="height:36px">

				<span class="f">

    #foreach(m:menuManager?.getScopeMenus("dymanci-time"))
##        #set(url=eval(m?.href))
        <a href="javascript:void(0);" value="${m?.href}" name="dynamic" ${choice==m?.id?'class="active_btn"':""}>${m.name}</a>
    #end


				</span>
    #div(divClass="clearfix")
</div>

    #@tinyTable("dynamicTable") ##ID为空则系统自动生成 带入参数则取该参数为ID
        #@div(divClass="tinyheaderTools form-inline")
            #setTinyTablePageSize([8,10,20,50,100,200])



        #end
        #@tinyTableContent(TINY_CONTEXT_PATH+adminPath+"/system/action/list") ##取数据地址 总数据
            #@thead()
                #@tr()###th  class 为sorting 表票可排序 为sorting_desc 为当前倒序
                    #@tinyTh({"width":"6"})<input type="checkbox" name="product-dymanic" value="">#end
                    #@tinyTh({"class":"sorting","rel":"actionDate"})日期#end
                    #@tinyTh({"class":"sorting","rel":"actionActor"})操作者#end
                    #@tinyTh({"class":"sorting","rel":"actionAction"})动作#end
                    #@tinyTh({"class":"sorting","rel":"actionObjectType"})对象类型#end
                    #@tinyTh({"class":"","rel":"sortname"})对象名称#end
                #end
            #end
        #end
    #end
#end
<script>
    $(function(){
        var dataUrl = $("#dynamicTable").attr("data-url");
        if(dataUrl.indexOf("choice")<0){
            $("#dynamicTable").attr("data-url",dataUrl+"?choice=all");
            $("#dynamicTable").trigger("refresh");
//            $("a[class=active_btn]").removeClass("active_btn");
            $("a[value=all]").addClass("active_btn");
        }
        $("a[name=dynamic]").on("click",function(){
            var choice = $(this).attr("value");
            $("#dynamicTable").attr("data-url",dataUrl+"?choice="+choice);
            $("#dynamicTable").trigger("refresh");
            $("a[class=active_btn]").removeClass("active_btn");
            $(this).addClass("active_btn");

        });
    })

</script>
