#!set(activeTitle="请求表格",activeMenuId=currentPageId)
##import("/org/tinygroup/table/components/tinytable.component")


#include("/common/common.page")
#@tinyTable() ##ID为空则系统自动生成 带入参数则取该参数为ID
    #@div(divBaseClass="tinyheaderTools form-inline")
        #setTinyTablePageSize([8,10,20,50,100,200])
    <input type="button" value="全选" class="btn btn-default btn-primary "
           onclick="selectAllNullorReserve('idCheck','全选');"/>
    <input type="button" value="反选" class="btn btn-default btn-primary"
           onclick="selectAllNullorReserve('idCheck','反选');"/>
        #foreach(m:menuManager.getScopeMenus("service-request-oper"))
            #if(m.id=="service-request-operation")
                #@buttonGroup()
                <div class="dropdown">
                    <a id="" role="button" data-toggle="dropdown" class="btn btn-primary" data-target="#"
                       href="javascript:void(0);">操作<span class="caret"></span></a>
                    #@ulDropdownMenu()

                        #@dropdownsLi("dropdown-submenu")
                            #@dropdownA("firstMenu" "javascript:void(0);")指派回复#end
                            #@dropdownsUl("dropdown-menu")
                                #@dropdownItem(
                                TINY_CONTEXT_PATH+"/service/request/solveBy" "records" "secondMenu")admin#end
                                #@dropdownItem(
                                TINY_CONTEXT_PATH+"/service/request/solveBy" "records" "secondMenu")张三#end
                                #@dropdownItem(
                                TINY_CONTEXT_PATH+"/service/request/solveBy" "records" "secondMenu")lisi#end
                            #end
                        #end

                        #@dropdownsLi("dropdown-submenu")
                            #@dropdownA("firstMenu" "javascript:void(0);")指派回访#end
                            #@dropdownsUl("dropdown-menu")
                                #@dropdownItem(
                                TINY_CONTEXT_PATH+"/service/request/reviewBy" "records" "secondMenu")admin#end
                                #@dropdownItem(
                                TINY_CONTEXT_PATH+"/service/request/reviewBy" "records" "secondMenu")张三#end
                                #@dropdownItem(
                                TINY_CONTEXT_PATH+"/service/request/reviewBy" "records" "secondMenu")lisi#end
                            #end
                        #end
                    #end
                </div>
                #end
            #end
        #end
        #set(m1=menuManager.getMenu("request-batchdel"))
        #if(m1)
            #@mulOperation("muldelete" TINY_CONTEXT_PATH+"/service/request/batchDelete")
            <a class="btn radius btn-danger"><i class="icon-trash"></i> 批量删除</a>
            #end
        #end
    #end
    #@tinyTableContent(TINY_CONTEXT_PATH+"/service/request/list/data?status="+status+
        "&operation="+operation+"&treeId="+treeId) ##取数据地址 总数据
        #@thead()
            #@tr()###th  class 为sorting 表票可排序 为sorting_desc 为当前倒序
                #@tinyTh({"width":"6"})<input type="checkbox" name="allck" value="">#end
            ##                #@tinyTh({"class":"sorting sorting_desc","rel":"sortname"})请求ID#end
                #@tinyTh({"class":"sorting sorting_desc","rel":"clientName"})客户名称#end
                #@tinyTh({"class":"sorting sorting_desc","rel":"requestTitle"})请求标题#end
                #@tinyTh({"class":"sorting sorting_desc","rel":"requestPre"})请求优先级#end
                #@tinyTh({"class":"sorting sorting_desc","rel":"requestStatus"})状态#end
                #@tinyTh({"class":"sorting sorting_desc","rel":"requestCommitmentDate"})请求承诺完成时间#end
                #@tinyTh({"class":"sorting sorting_desc","rel":"replier"})指派回复#end
                #@tinyTh({"class":"sorting sorting_desc","rel":"requestReviewer"})指派回访#end
                #@tinyTh({"class":"","rel":"sortname"})操作#end
            #end
        #end
    #end
    #initBatchAction()
#end
#@simpleModal("myModal" "用户编辑")#end
#@simpleModal("myModal2" "用户删除")#end

##JS代码全选和反选
<script type="text/javascript">

    function selectAllNullorReserve(obj, type) {
        if (obj != null && obj != "") {
            if (document.getElementsByName(obj) != undefined && document.getElementsByName(obj).length > 0) {	//getElementsByName函数的作用按名字查找对象，返回一个数组。
                var userids = document.getElementsByName(obj);
                if (type == "全选") {
                    for (var i = 0; i < userids.length; i++) {
                        if (userids[i].checked == false) {
                            userids[i].checked = true;
                        }
                    }
                } else if (type == "全不选") {
                    for (var i = 0; i < userids.length; i++) {
                        if (userids[i].checked == true) {
                            userids[i].checked = false;
                        }
                    }
                } else if (type == "反选") {
                    for (var i = 0; i < userids.length; i++) {
                        if (userids[i].checked == true) {
                            userids[i].checked = false;
                        } else {
                            userids[i].checked = true;
                        }
                    }
                }
            }
        }
    }
</script>